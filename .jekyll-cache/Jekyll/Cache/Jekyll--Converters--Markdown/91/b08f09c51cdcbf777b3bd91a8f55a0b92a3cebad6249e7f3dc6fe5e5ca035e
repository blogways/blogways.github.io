I"<blockquote>
  <p>å®‰è£…Stormé›†ç¾¤ï¼Œéœ€è¦ä¾èµ–ä»¥ä¸‹ç»„ä»¶ï¼š</p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Zookeeper
Python
Zeromq
Storm
JDK
JZMQ
</code></pre></div>  </div>
</blockquote>

<blockquote>
  <p>æˆ‘å‡†å¤‡äº†3å°æœºå™¨ï¼Œå¹¶åœ¨æ¯å°æœºå™¨ä¸Šé…ç½®ä¸»æœºåˆ«åï¼Œ$ vi /etc/hosts</p>
</blockquote>

<p><img src="/images/zhaojiajun/20161120img01.png" alt="20161120img01" /></p>

<h2 id="1æ­å»ºzookeeperé›†ç¾¤">1.æ­å»ºZookeeperé›†ç¾¤</h2>

<h4 id="1å®‰è£…zookeeper">(1)å®‰è£…zookeeper</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ tar zxvf zookeeper-3.4.6.tar.gz
</code></pre></div></div>

<h4 id="2ä¿®æ”¹zoocfg">(2)ä¿®æ”¹zoo.cfg</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cp -rf conf/zoo_sample.cfg conf/zoo.cfg
$ vi zoo.cfg
</code></pre></div></div>

<blockquote>
  <p>å†…å®¹ï¼š</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tickTime=2000
dataDir=/usr/local/software/zookeeper-3.4.6/data
clientPort=2181
initLimit=5
syncLimit=2
server.1=host1:2888:3888
server.2=host2:2889:3889
server.3=host3:2890:3890
</code></pre></div></div>

<h4 id="3åœ¨datadirçš„ç›®å½•ä¸­æ·»åŠ myidå¹¶ä¸”ç¼–è¾‘å†…å®¹åˆ†åˆ«å¯¹åº”serverçš„åºå·åˆ†åˆ«æ˜¯123">(3)åœ¨â€dataDirâ€çš„ç›®å½•ä¸­æ·»åŠ myidï¼Œå¹¶ä¸”ç¼–è¾‘å†…å®¹åˆ†åˆ«å¯¹åº”serverçš„åºå·ï¼Œåˆ†åˆ«æ˜¯1ã€2ã€3</h4>

<h4 id="4åœ¨ä¸‰å°æœºå™¨ä¸Šåˆ†åˆ«å¯åŠ¨">(4)åœ¨ä¸‰å°æœºå™¨ä¸Šåˆ†åˆ«å¯åŠ¨</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./bin/zkServer.sh start ./conf/zoo.cfg
</code></pre></div></div>

<blockquote>
  <p>é€šè¿‡$ ./bin/zkServer.sh status æŸ¥çœ‹zookeeperçš„leader</p>
</blockquote>

<p><img src="/images/zhaojiajun/20161120img02.png" alt="20161120img02" /></p>

<p><img src="/images/zhaojiajun/20161120img03.png" alt="20161120img03" /></p>

<p><img src="/images/zhaojiajun/20161120img04.png" alt="20161120img04" /></p>

<h2 id="2å®‰è£…jdk">2.å®‰è£…JDK</h2>

<h4 id="1-tar-zxvf-jdk-7u79-linux-x64targz">(1) tar zxvf jdk-7u79-linux-x64.tar.gz</h4>

<h4 id="2-é…ç½®ç¯å¢ƒå˜é‡">(2) é…ç½®ç¯å¢ƒå˜é‡</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vi /etc/profile
</code></pre></div></div>

<p><img src="/images/zhaojiajun/20161120img05.png" alt="20161120img05" /></p>

<blockquote>
  <p>è¿è¡Œ$ source /etc/profileï¼Œä½¿é…ç½®ç¯å¢ƒç”Ÿæ•ˆ</p>
</blockquote>

<h4 id="3æŸ¥çœ‹javaç‰ˆæœ¬">(3)æŸ¥çœ‹javaç‰ˆæœ¬</h4>

<p><img src="/images/zhaojiajun/20161120img06.png" alt="20161120img06" /></p>

<h2 id="3å®‰è£…jzmq">3.å®‰è£…JZMQ</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone git://github.com/nathanmarz/jzmq.git
$ cd jzmq
$ ./autogen.sh
$ ./configure
$ make &amp; make install
</code></pre></div></div>

<h2 id="4å®‰è£…zeromq">4.å®‰è£…Zeromq</h2>

<blockquote>
  <p>å®‰è£…ZeroMQæ‰€éœ€ç»„ä»¶åŠå·¥å…·ï¼š</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yum install gcc gcc-c++ make uuid-devel libuuid-devel libtool

$ tar zxvf zeromq-4.2.0.tar.gz
$ cd zeromq-4.2.0
</code></pre></div></div>

<blockquote>
  <p>æ‰‹åŠ¨åˆ›å»ºclassdist_noinst.stampç©ºæ–‡ä»¶</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ touch src/classdist_noinst.stamp
</code></pre></div></div>

<blockquote>
  <p>è¿›å…¥æ–‡ä»¶å¤¹ jzmq/src/org/zeromqï¼Œæ‰‹åŠ¨ç¼–è¯‘Javaä»£ç  $ javac  *.java</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./configure
$ make &amp; make install
</code></pre></div></div>

<h2 id="5æ­å»ºstormé›†ç¾¤">5.æ­å»ºStormé›†ç¾¤</h2>

<blockquote>
  <p>(1) å®‰è£…åŒ…</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ tar zxvf apache-storm-1.0.2.tar.gz
</code></pre></div></div>

<blockquote>
  <p>(2) é…ç½®ç¯å¢ƒå˜é‡</p>
</blockquote>

<p><img src="/images/zhaojiajun/20161120img07.png" alt="20161120img07" /></p>

<blockquote>
  <p>(3) å»ºç«‹stormå­˜å‚¨ç›®å½•</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir /tmp/storm
</code></pre></div></div>

<blockquote>
  <p>(4) æŠŠhost1ä½œä¸ºnimbuså’Œuiçš„æœåŠ¡å™¨ã€‚host1ã€host2ã€host3ä¸ºsupervisoræœåŠ¡å™¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶/conf/storm.yaml, å¦‚ä¸‹é…ç½®ï¼š</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>storm.zookeeper.servers:
 - "host1"
 - "host2"
 - "host3"
ui.port: 8081
nimbus.host: "host1"
storm.local.dir: "/tmp/storm"
supervisor.slots.ports:
  - 6700
  - 6701
  - 6702
  - 6703
</code></pre></div></div>

<blockquote>
  <p><strong>å…¶ä¸­ï¼Œé…ç½®å‚æ•°è¯´æ˜ï¼š</strong></p>

  <p>â€¢ storm.zookeeper.serversï¼šStormé›†ç¾¤ä½¿ç”¨çš„Zookeeperé›†ç¾¤åœ°å€ï¼Œå¦‚æœZookeeperé›†ç¾¤ä½¿ç”¨çš„ä¸æ˜¯é»˜è®¤ç«¯å£ï¼Œé‚£ä¹ˆè¿˜éœ€è¦storm.zookeeper.porté€‰é¡¹ã€‚</p>

  <p>â€¢ ui.portï¼šStorm UIçš„æœåŠ¡ç«¯å£</p>

  <p>â€¢ storm.local.dirï¼šNimbuså’ŒSupervisorè¿›ç¨‹ç”¨äºå­˜å‚¨å°‘é‡çŠ¶æ€ï¼Œå¦‚jarsã€confsç­‰çš„æœ¬åœ°ç£ç›˜ç›®å½•</p>

  <p>â€¢ nimbus.host: Stormé›†ç¾¤Nimbusæœºå™¨åœ°å€</p>

  <p>â€¢ supervisor.slots.ports: å¯¹äºæ¯ä¸ªSupervisorå·¥ä½œèŠ‚ç‚¹ï¼Œéœ€è¦é…ç½®è¯¥å·¥ä½œèŠ‚ç‚¹å¯ä»¥è¿è¡Œçš„workeræ•°é‡ã€‚æ¯ä¸ªworkerå ç”¨ä¸€ä¸ªå•ç‹¬çš„ç«¯å£ç”¨äºæ¥æ”¶æ¶ˆæ¯ï¼Œè¯¥é…ç½®é€‰é¡¹å³ç”¨äºå®šä¹‰å“ªäº›ç«¯å£æ˜¯å¯è¢«workerä½¿ç”¨çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šå¯è¿è¡Œ4ä¸ªworkersï¼Œåˆ†åˆ«åœ¨6700ã€6701ã€6702å’Œ6703ç«¯å£</p>
</blockquote>

<h2 id="6å¯åŠ¨stormé›†ç¾¤">6.å¯åŠ¨Stormé›†ç¾¤</h2>

<h4 id="1-nimbus">(1) Nimbus:</h4>

<blockquote>
  <p>åœ¨Stormä¸»æ§èŠ‚ç‚¹(æœ¬æ–‡ä¸­ä¸ºhost1)ä¸Šè¿è¡Œâ€bin/storm nimbus &gt;/dev/null 2&gt;&amp;1 &amp;â€å¯åŠ¨Nimbusåå°ç¨‹åºï¼Œå¹¶æ”¾åˆ°åå°æ‰§è¡Œï¼›</p>
</blockquote>

<h4 id="2-supervisor">(2) Supervisor:</h4>

<blockquote>
  <p>åœ¨Stormå„ä¸ªå·¥ä½œèŠ‚ç‚¹(æœ¬æ–‡ä¸­ä¸ºhost1/host2/host3)ä¸Šè¿è¡Œâ€bin/storm supervisor &gt;/dev/null 2&gt;&amp;1 &amp;â€å¯åŠ¨Supervisoråå°ç¨‹åºï¼Œå¹¶æ”¾åˆ°åå°æ‰§è¡Œï¼›</p>
</blockquote>

<h4 id="3-ui">(3) UI:</h4>

<blockquote>
  <p>åœ¨Stormä¸»æ§èŠ‚ç‚¹(æœ¬æ–‡ä¸­ä¸ºhost1)ä¸Šè¿è¡Œâ€bin/storm ui &gt;/dev/null 2&gt;&amp;1 &amp;â€å¯åŠ¨UIåå°ç¨‹åºï¼Œå¹¶æ”¾åˆ°åå°æ‰§è¡Œã€‚</p>
</blockquote>

<h2 id="7æŸ¥çœ‹storm-ui">7.æŸ¥çœ‹Storm UI</h2>

<blockquote>
  <p>è¯·æ±‚ <em>http://192.168.137.131:8081/</em></p>
</blockquote>

<p><img src="/images/zhaojiajun/20161120img08.png" alt="20161120img08" /></p>

<p><strong>è‡ªæ­¤stormé›†ç¾¤ç¯å¢ƒå°±æ­å»ºå®Œæ¯•äº†ã€‚</strong></p>
:ET