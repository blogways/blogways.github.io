I"Š<h3 id="ä¸€æ¦‚è¿°">ä¸€ã€æ¦‚è¿°</h3>

<p>å¤§éƒ¨åˆ†Javaå¼€å‘äººå‘˜éƒ½ä¼šå®‰è£…JavaBeansçš„å‘½åè§„èŒƒä¸ºå±æ€§åˆ›å»ºgetterå’Œsetteræ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡getXxxå’ŒsetXxxæ–¹æ³•ç›´æ¥è¿›è¡Œè°ƒç”¨ã€‚ä½†æ˜¯ï¼Œä¹Ÿæœ‰ä¸€äº›åœºåˆæˆ‘ä»¬å¿…é¡»åŠ¨æ€è®¿é—®javaå¯¹è±¡çš„å±æ€§ï¼Œæ¯”å¦‚ï¼š</p>

<ul>
  <li>ä¸ºå’Œjavaå¯¹è±¡æ¨¡å‹è¿›è¡Œäº¤äº’ï¼Œè€Œåˆ›å»ºçš„è„šæœ¬è¯­è¨€ï¼ˆå¦‚ï¼š<code class="language-plaintext highlighter-rouge">Bean Scripting Framework</code>ï¼‰</li>
  <li>ä¸ºå¤„ç†WEBå±•ç¤ºæˆ–è€…ç±»ä¼¼éœ€æ±‚ï¼Œè€Œåˆ›å»ºçš„æ¨¡æ¿è¯­è¨€(å¦‚ï¼š<code class="language-plaintext highlighter-rouge">JSP</code>å’Œ<code class="language-plaintext highlighter-rouge">Velocity</code>)</li>
  <li>ä¸ºJSPå’ŒXSPç¯å¢ƒåˆ›å»ºè‡ªå®šä¹‰tagåº“(å¦‚ï¼š<code class="language-plaintext highlighter-rouge">Apache Taglibs</code>ã€<code class="language-plaintext highlighter-rouge">Struts</code>å’Œ<code class="language-plaintext highlighter-rouge">Cocoon</code>)</li>
  <li>å¯¹ä¸€äº›åŸºäºXMLé…ç½®çš„èµ„æºçš„å¤„ç†ï¼ˆå¦‚ï¼š<code class="language-plaintext highlighter-rouge">Ant</code>æ„å»ºè„šæœ¬ï¼Œwebåº”ç”¨éƒ¨ç½²é…ç½®æ–‡ä»¶ï¼ŒTomcatçš„<code class="language-plaintext highlighter-rouge">server.xml</code>æ–‡ä»¶ç­‰ç­‰ï¼‰</li>
</ul>

<p>Javaè¯­è¨€æä¾›äº†åå°„(<code class="language-plaintext highlighter-rouge">Reflection</code>)å’Œå†…çœ(<code class="language-plaintext highlighter-rouge">Introspection</code><sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>)APIï¼ˆè§<code class="language-plaintext highlighter-rouge">java.lang.reflect</code>å’Œ<code class="language-plaintext highlighter-rouge">java.beans</code>è¿™ä¸¤ä¸ªåŒ…è¯´æ˜ï¼‰ï¼Œä½†è¿™äº›APIå¾ˆéš¾ç†è§£å¹¶åŠ ä»¥åº”ç”¨ã€‚è€ŒBeanUtilsåº“çš„ç›®çš„ï¼Œå°±æ˜¯é’ˆå¯¹è¿™äº›èƒ½åŠ›æä¾›äº†æ˜“ç”¨çš„åŒ…è£…ã€‚</p>

<h3 id="äºŒä¸‹è½½åŠæºç ">äºŒã€ä¸‹è½½åŠæºç </h3>

<p>ä¸‹è½½åœ°å€ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://commons.apache.org/proper/commons-beanutils/download_beanutils.cgi
</code></pre></div></div>

<p>æºç è·å–ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>svn checkout http://svn.apache.org/repos/asf/commons/proper/beanutils/trunk/ commons-beanutils
</code></pre></div></div>

<p>Githubé•œåƒï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://github.com/apache/commons-beanutils
</code></pre></div></div>

<p>Mavenä¾èµ–ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;
    &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;
    &lt;version&gt;1.9.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div></div>

<h3 id="ä¸‰ä½¿ç”¨è¯´æ˜">ä¸‰ã€ä½¿ç”¨è¯´æ˜</h3>

<p>è‡ªä»<code class="language-plaintext highlighter-rouge">1.7.0</code>ç‰ˆå¼€å§‹ï¼ŒBeanUtilså‘å¸ƒä¸‰ä¸ªjaråŒ…ï¼Œä¾›åº”ç”¨è°ƒç”¨ï¼š</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">commons-beanutils.jar</code> åŒ…å«æ‰€æœ‰åŠŸèƒ½</li>
  <li><code class="language-plaintext highlighter-rouge">commons-beanutils-core.jar</code> åŒ…å«é™¤<code class="language-plaintext highlighter-rouge">Bean Collections</code>ç±»å¤–çš„æ‰€æœ‰åŠŸèƒ½</li>
  <li><code class="language-plaintext highlighter-rouge">commons-beanutils-bean-collections.jar</code> åªåŒ…å«<code class="language-plaintext highlighter-rouge">Bean Collections</code>ç±»</li>
</ul>

<p>åº”ç”¨å¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œé€‰æ‹©ä½¿ç”¨ã€‚</p>

<p>åœ¨è¿è¡Œæ—¶ï¼Œ<code class="language-plaintext highlighter-rouge">commons-beanutils</code>åŒ…ä¾èµ–<code class="language-plaintext highlighter-rouge">commons-logging</code>åŒ…ï¼Œå¦å¤–ï¼Œå¦‚æœä½¿ç”¨äº†ä¸‹é¢å‡ ä¸ªç±»ï¼Œåˆ™è¿˜éœ€è¦ä¾èµ–<code class="language-plaintext highlighter-rouge">commons-collections</code>åŒ…ï¼š</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">org.apache.commons.beanutils.BeanMap</code></li>
  <li><code class="language-plaintext highlighter-rouge">org.apache.commons.beanutils.BeanPredicate</code></li>
  <li><code class="language-plaintext highlighter-rouge">org.apache.commons.beanutils.BeanPropertyValueChangeClosure</code></li>
  <li><code class="language-plaintext highlighter-rouge">org.apache.commons.beanutils.BeanPropertyValueEqualsPredicate</code></li>
  <li><code class="language-plaintext highlighter-rouge">org.apache.commons.beanutils.BeanToPropertyValueTransformer</code></li>
</ul>

<h4 id="31-æ ‡å‡†javabeans">3.1 æ ‡å‡†JavaBeans</h4>

<p>åœ¨ä»‹ç»ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç»™ä¸€ä¸ªå¯¹è±¡çš„å®šä¹‰ï¼Œåé¢çš„å®ä¾‹å°†ç»“åˆè¿™ä¸ªå¯¹è±¡ç»™å‡ºã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class Employee {
    public Address getAddress(String type);
    public void setAddress(String type, Address address);
    public Employee getSubordinate(int index);
    public void setSubordinate(int index, Employee subordinate);
    public String getFirstName();
    public void setFirstName(String firstName);
    public String getLastName();
    public void setLastName(String lastName);
}
</code></pre></div></div>

<h4 id="311-åŸºæœ¬å±æ€§è¯»å†™">3.1.1 åŸºæœ¬å±æ€§è¯»å†™</h4>

<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä»‹ç»<code class="language-plaintext highlighter-rouge">PropertyUtils</code>ç±»ï¼Œå…¶ä½œç”¨ï¼š</p>

<ul>
  <li>
    <p>å¯ä»¥å¾ˆå®¹æ˜“çš„è¯»å–æˆ–è€…è®¾ç½®ç®€å•çš„å±æ€§å€¼</p>

    <p>æ‰€è°“â€œç®€å•â€çš„å±æ€§ï¼Œæ˜¯æŒ‡ï¼šå±æ€§åªæ˜¯ä¸€ä¸ªç®€å•çš„å¯è¢«è¯»å†™çš„å€¼ã€‚è¿™ä¸ªå±æ€§çš„ç±»å‹ï¼Œå¯èƒ½æ˜¯javaè¯­è¨€åŸç”Ÿç±»å‹ï¼ˆå¦‚:<code class="language-plaintext highlighter-rouge">int</code>æˆ–ä¸€ä¸ªç®€å•å¯¹è±¡<code class="language-plaintext highlighter-rouge">java.lang.String</code>ç­‰ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªç”±ç¨‹åºæˆ–è€…ç±»åº“å®šä¹‰çš„å¤æ‚çš„å¯¹è±¡</p>

    <p>å¯¹å…¶æ“ä½œçš„APIæœ‰ï¼š</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  //è¯»æ“ä½œ
  PropertyUtils.getSimpleProperty(Object, String)
  //å†™æ“ä½œ
  PropertyUtils.setSimpleProperty(Object, String, Object)
</code></pre></div>    </div>

    <p>ä¾‹å¦‚ï¼š</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Employee employee = ...;
  String firstName = (String)
     PropertyUtils.getSimpleProperty(employee, "firstName");
  String lastName = (String)
     PropertyUtils.getSimpleProperty(employee, "lastName");
  ... manipulate the values ...
  PropertyUtils.setSimpleProperty(employee, "firstName", firstName);
  PropertyUtils.setSimpleProperty(employee, "lastName", lastName);
</code></pre></div>    </div>
  </li>
  <li>
    <p>é’ˆå¯¹å¸¦åºåˆ—çš„å±æ€§ï¼Œæ”¯æŒä¸¤ç§æ“ä½œæ–¹å¼ã€‚</p>

    <p>æ‰€è°“â€œå¸¦åºåˆ—â€çš„å±æ€§ï¼Œæ˜¯æŒ‡ï¼šä¸€ç»„æœ‰åºçš„å¯¹è±¡é›†åˆï¼Œå¯ä»¥é€šè¿‡è‡ªç„¶æ•°ä¸‹æ ‡å•ç‹¬è®¿é—®ã€‚æˆ–è€…å¯ä»¥å¦‚åŒæ•°ç»„é‚£æ ·è¿›è¡Œè¯»å†™ã€‚å¦‚æœï¼Œå±æ€§çš„ç±»å‹æ˜¯<code class="language-plaintext highlighter-rouge">java.util.List</code>ä¹Ÿå¯ä»¥ã€‚</p>

    <ul>
      <li>
        <p>ä¸€ç§æ–¹å¼ï¼šå°†ä¸‹æ ‡ä½¿ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥ï¼Œç„¶åè·Ÿåœ¨å±æ€§ååï¼Œå½“åšå±æ€§åä½¿ç”¨ã€‚</p>

        <p>å…¶APIä¸ºï¼š</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  //è¯»æ“ä½œ
  PropertyUtils.getIndexedProperty(Object, String)
  //å–æ“ä½œ
  PropertyUtils.setIndexedProperty(Object, String, Object)
</code></pre></div>        </div>

        <p>ä¾‹å¦‚ï¼š</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Employee employee = ...;
  int index = ...;
  String name = "subordinate[" + index + "]";
  Employee subordinate = (Employee)
  PropertyUtils.getIndexedProperty(employee, name);
</code></pre></div>        </div>
      </li>
      <li>
        <p>å¦å¤–ä¸€ç§æ–¹å¼ï¼šå°†ä¸‹æ ‡ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å‚æ•°ä½¿ç”¨ã€‚</p>

        <p>å…¶APIï¼š</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  PropertyUtils.getIndexedProperty(Object, String, int)
  PropertyUtils.setIndexedProperty(Object, String, int, Object)
</code></pre></div>        </div>

        <p>ä¾‹å¦‚ï¼š</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Employee employee = ...;
  int index = ...;
  Employee subordinate = (Employee)
  PropertyUtils.getIndexedProperty(employee, "subordinate", index);
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>é’ˆå¯¹å¯ä»¥Mapedçš„å±æ€§ï¼Œæ”¯æŒä¸¤ç§æ“ä½œæ–¹å¼ï¼Œç±»ä¼¼ä¸Šé¢çš„å¸¦åºåˆ—å±æ€§çš„è¯»å†™æ“ä½œã€‚</p>

    <p>æ‰€è°“â€œå¯ä»¥Mapedâ€çš„å±æ€§å€¼ï¼Œæ˜¯æŒ‡å±æ€§ç±»å‹ä¸º<code class="language-plaintext highlighter-rouge">java.util.Map</code>ã€‚å¯ä»¥é€šè¿‡Stringå‹çš„é”®ï¼Œå¯¹å…¶è¿›è¡Œè¯»å†™ã€‚</p>

    <ul>
      <li>
        <p>ä¸€ç§æ–¹å¼ï¼šå°†é”®å€¼ç”¨åœ†æ‹¬å·æ‹¬èµ·æ¥ï¼Œè·Ÿåœ¨å±æ€§ååé¢ï¼Œå½“åšå±æ€§åä½¿ç”¨ã€‚</p>

        <p>å…¶APIï¼š</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  //è¯»æ“ä½œ
  PropertyUtils.getMappedProperty(Object, String)
  //å†™æ“ä½œ
  PropertyUtils.setMappedProperty(Object, String, Object)
</code></pre></div>        </div>

        <p>ä¾‹å¦‚ï¼š</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Employee employee = ...;
  Address address = ...;
  PropertyUtils.setMappedProperty(employee, "address(home)", address);
</code></pre></div>        </div>
      </li>
      <li>
        <p>å¦å¤–ä¸€ç§æ–¹å¼ï¼šå°†é”®å€¼ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å‚æ•°ä½¿ç”¨ã€‚</p>

        <p>å…¶APIï¼š</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  //è¯»æ“ä½œ
  PropertyUtils.getMappedProperty(Object, String, String)
  //å†™æ“ä½œ
  PropertyUtils.setMappedProperty(Object, String, String, Object)
</code></pre></div>        </div>

        <p>ä¾‹å¦‚ï¼š</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Employee employee = ...;
  Address address = ...;
  PropertyUtils.setMappedProperty(employee, "address", "home", address);
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h4 id="312-åµŒå¥—å±æ€§è¯»å†™">3.1.2 åµŒå¥—å±æ€§è¯»å†™</h4>

<p>ç»“åˆä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¦è®¿é—®é›‡å‘˜å®¶åº­åœ°å€ä¸­çš„åŸå¸‚ä¿¡æ¯ï¼ŒæŒ‰å¸¸è§„ç¼–ç¨‹æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>String city = employee.getAddress("home").getCity();
</code></pre></div></div>

<p>è¦ä½¿ç”¨<code class="language-plaintext highlighter-rouge">PropertyUtils</code>æ¥è®¿é—®ç±»ä¼¼ä¸Šé¢çš„å¤šå±‚å±æ€§ï¼Œå¯ä»¥é€šè¿‡<code class="language-plaintext highlighter-rouge">.</code>ç¬¦å·å°†å±æ€§åä¸²è”èµ·æ¥ä½œä¸ºè®¿é—®è·¯å¾„ã€‚ä½¿ç”¨çš„APIä¸ºï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PropertyUtils.getNestedProperty(Object, String)
PropertyUtils.setNestedProperty(Object, String, Object)
</code></pre></div></div>

<p>ä¸Šé¢å®ä¾‹çš„ç­‰æ•ˆä»£ç ä¸ºï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>String city = (String) PropertyUtils.getNestedProperty(employee, "address(home).city");
</code></pre></div></div>

<p><strong>è¿™é‡Œå†ç»™å‡ºä¸€ç»„æ›´ç®€å•çš„å¸¸ç”¨çš„APIï¼š</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//è¯»æ“ä½œ
PropertyUtils.getProperty(Object, String)
//å†™æ“ä½œ
PropertyUtils.setProperty(Object, String, Object)
</code></pre></div></div>

<p>ä½¿ç”¨ä¸¾ä¾‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Employee employee = ...;
String city = (String) PropertyUtils.getProperty(employee,
       "subordinate[3].address(home).city");
</code></pre></div></div>

<h4 id="32-åŠ¨æ€-beans">3.2 åŠ¨æ€ Beans</h4>

<p>ä¸Šé¢ä»‹ç»çš„<code class="language-plaintext highlighter-rouge">PropertyUtils</code>ç±»ï¼Œå¯ä»¥è½»æ¾åœ°å¯¹å·²ç»å­˜åœ¨çš„JavaBeançš„å±æ€§è¿›è¡Œè®¿é—®ã€‚ä½†æ˜¯ï¼Œæœ‰äº›åœºåˆï¼Œä½ éœ€è¦é€šè¿‡åŠ¨æ€è®¡ç®—å‡ºæ¥çš„å±æ€§é›†ï¼Œæ¥ç¡®å®šä¸€ä¸ªJavaBeanï¼Œè€Œä¸å¿…å®é™…ç¼–å†™æŸä¸ªç¡®å®šçš„JavaBeanã€‚</p>

<p>ä¸ºæ­¤ç›®çš„ï¼ŒBeanUtilsæä¾›<code class="language-plaintext highlighter-rouge">DynaBean</code>æ¥å£å’Œä¸ä¹‹ç›¸å…³çš„<code class="language-plaintext highlighter-rouge">DynaClass</code>æ¥å£ã€‚</p>

<p>æˆ‘ä»¬çœ‹çœ‹ä»£ç ï¼Œå¦‚ä½•ä½¿ç”¨<code class="language-plaintext highlighter-rouge">DynaBean</code>æ¥å®ç°å‰é¢<code class="language-plaintext highlighter-rouge">Employee</code>ç±»çš„åŠŸèƒ½ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DynaBean employee = ...; // è¿™é‡Œçš„ä»£ç ï¼Œè¦æ ¹æ®ä½ ä½¿ç”¨çš„å…·ä½“çš„BynaBeanå®ç°æ¥å®šäº†
String firstName = (String) employee.get("firstName");
Address homeAddress = (Address) employee.get("address", "home");
Object subordinate = employee.get("subordinate", 2);
</code></pre></div></div>

<p>ç”±äº<code class="language-plaintext highlighter-rouge">DynaBean</code>å’Œ<code class="language-plaintext highlighter-rouge">DynaClass</code>ä»…ä»…æ˜¯æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥æœ‰ä¸åŒçš„å®ç°ã€‚å¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯ï¼Œå¼€å‘ä¸åŒçš„å®ç°ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å‡ ä¸ª<code class="language-plaintext highlighter-rouge">BeanUtils</code>å†…ç½®çš„å®ç°ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚ï¼Œæ¥å®šåˆ¶è‡ªå·±çš„å®ç°ã€‚</p>

<h4 id="321-basicdynabeanå’Œbasicdynaclass">3.2.1 <code class="language-plaintext highlighter-rouge">BasicDynaBean</code>å’Œ<code class="language-plaintext highlighter-rouge">BasicDynaClass</code></h4>

<p>æˆ‘ä»¬ç»“åˆå‰é¢çš„<code class="language-plaintext highlighter-rouge">Employee</code>ä¾‹å­ï¼Œæ¥ä»‹ç»<code class="language-plaintext highlighter-rouge">BasicDynaBean</code>å’Œ<code class="language-plaintext highlighter-rouge">BasicDynaClass</code>çš„ä½¿ç”¨æ­¥éª¤åŠå®ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>

<ol>
  <li>
    <p>åˆ›å»ºå±æ€§é›†</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> DynaProperty[] props = new DynaProperty[]{
      new DynaProperty("address", java.util.Map.class),
      new DynaProperty("subordinate", Employee[].class),
      new DynaProperty("firstName", String.class),
      new DynaProperty("lastName",  String.class)
    };
</code></pre></div>    </div>
  </li>
  <li>
    <p>åˆ›å»º<code class="language-plaintext highlighter-rouge">BasicDynaClass</code></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> BasicDynaClass dynaClass = new BasicDynaClass("employee", null, props);
</code></pre></div>    </div>
    <p>è¿™é‡Œ<code class="language-plaintext highlighter-rouge">BasicDynaClass</code>æ„é€ æ–¹æ³•æ¥æ”¶çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯<code class="language-plaintext highlighter-rouge">null</code>ï¼Œå®ƒå†…éƒ¨ä¼šä½œä¸º<code class="language-plaintext highlighter-rouge">BasicDynaBean.class</code>æ¥å¤„ç†ã€‚</p>
  </li>
  <li>
    <p>è·å–<code class="language-plaintext highlighter-rouge">DynaBean</code>å®ä¾‹å¹¶æ“ä½œ</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> DynaBean employee = dynaClass.newInstance();
 employee.set("address", new HashMap());
 employee.set("subordinate", new Employee[0]);
 employee.set("firstName", "Fred");
 employee.set("lastName", "Flintstone");
</code></pre></div>    </div>

    <p>è¿™é‡Œï¼Œ<code class="language-plaintext highlighter-rouge">dynaClass.newInstance()</code>çš„è¿”å›å€¼çš„ç±»å‹ä¸º<code class="language-plaintext highlighter-rouge">DynaBean</code>è€Œä¸æ˜¯ä¸Šæ–‡ä¸­è®¾ç½®çš„<code class="language-plaintext highlighter-rouge">BasicDynaBean</code>,è¿™æ˜¯å› ä¸ºï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¨‹åºæ˜¯ä¸å…³å¿ƒå…·ä½“å®ç°ï¼Œè€Œåªéœ€è¦æ ¹æ®<code class="language-plaintext highlighter-rouge">BynaBean</code>çš„æ¥å£è¿›è¡Œè®¿é—®å°±è¡Œäº†ã€‚</p>
  </li>
</ol>

<h4 id="322-resultsetdynaclassä½¿ç”¨dynabeanså»åŒ…è£…resultset">3.2.2 <code class="language-plaintext highlighter-rouge">ResultSetDynaClass</code>ï¼ˆä½¿ç”¨<code class="language-plaintext highlighter-rouge">DynaBeans</code>å»åŒ…è£…<code class="language-plaintext highlighter-rouge">ResultSet</code>ï¼‰</h4>

<p>å°†ä¸€ç³»åˆ—æœ‰å…³ç³»çš„ï¼Œä½†è‡ªèº«åˆä¸æ˜¯JavaBeançš„æ•°æ®é›†åˆï¼ŒåŒ…è£…èµ·æ¥ï¼Œæ˜¯<code class="language-plaintext highlighter-rouge">DynaBean</code>APIçš„ä¸€ä¸ªæœ€æ™®éçš„ä½¿ç”¨æ–¹å¼ã€‚è¿™å…¶ä¸­ä¸€ä¸ªç»å…¸åº”ç”¨å°±æ˜¯ï¼Œä½¿ç”¨<code class="language-plaintext highlighter-rouge">DynaBean</code>å»åŒ…è£…ï¼Œç”¨<code class="language-plaintext highlighter-rouge">JDBC</code>æ‰§è¡Œä¸€ä¸ª<code class="language-plaintext highlighter-rouge">SELECT</code>è¯­å¥è¿”è¿˜çš„ç»“æœ<code class="language-plaintext highlighter-rouge">java.sql.ResultSet</code>å¯¹è±¡ã€‚</p>

<p>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Connection conn = ...;
Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery
     ("select account_id, name from customers");
Iterator rows = (new ResultSetDynaClass(rs)).iterator();
while (rows.hasNext()) {
    DynaBean row = (DynaBean) rows.next();
    System.out.println("Account number is " +
                        row.get("account_id") +
                        " and name is " + row.get("name"));
}
rs.close();
stmt.close();
</code></pre></div></div>

<h4 id="323-rowsetdynaclasså°†ç¦»çº¿çš„resultsetåŒ…è£…æˆdynabeans">3.2.3 <code class="language-plaintext highlighter-rouge">RowSetDynaClass</code>(å°†ç¦»çº¿çš„<code class="language-plaintext highlighter-rouge">ResultSet</code>åŒ…è£…æˆ<code class="language-plaintext highlighter-rouge">DynaBeans</code>)</h4>

<p>å°½ç®¡ä½¿ç”¨<code class="language-plaintext highlighter-rouge">ResultSetDynaClass</code>å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å®ƒè¦æ±‚æŸ¥è¯¢çš„ç»“æœé›†åœ¨æ•°æ®æ•´ä¸ªå¤„ç†è¿‡ç¨‹ä¸­ä¸€ç›´ä¿æŒ<code class="language-plaintext highlighter-rouge">open</code>çŠ¶æ€ã€‚ç„¶è€Œï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦å…ˆå°†ç»“æœé›†å…³é—­åï¼Œå†å»å¤„ç†æŸ¥è¯¢ç»“æœçš„å†…å®¹ã€‚ä¸è¿‡è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦è¶³å¤Ÿçš„å†…å­˜å­˜å‚¨æŸ¥è¯¢ç»“æœï¼Œä»¥åŠå­˜å‚¨è¿‡ç¨‹ä¸­æ‰€éœ€çš„æ€§èƒ½æŸè€—ã€‚å¦‚æœï¼Œä½ èƒ½æ¥å—è¿™ç‚¹ï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">RowSetDynaClass</code>.</p>

<p>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Connection conn = ...;  // ä»è¿æ¥æ± è·å–è¿æ¥
Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery("SELECT ...");
RowSetDynaClass rsdc = new RowSetDynaClass(rs);
rs.close();
stmt.close();
...;                    // å°†è¿æ¥æ”¾å›è¿æ¥æ± 
List rows = rsdc.getRows();
...;                    // å¤„ç†è®°å½•
</code></pre></div></div>

<p>ä½¿ç”¨<code class="language-plaintext highlighter-rouge">RowSetDynaClass</code>æœ‰ä¸ªé¢å¤–çš„å¥½å¤„ï¼Œç”±äº<code class="language-plaintext highlighter-rouge">RowSetDynaClass</code>å®ç°äº†<code class="language-plaintext highlighter-rouge">java.io.Serializable</code>ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆå®¹æ˜“çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚è¿™æ ·ï¼Œä½¿ç”¨<code class="language-plaintext highlighter-rouge">RowSetDynaClass</code>å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†SQLè¯­å¥æŸ¥è¯¢ç»“æœä¼ è¾“ç»™è¿œç¨‹çš„javaç«¯åº”ç”¨ã€‚</p>

<h4 id="324-wrapdynabeanå’Œwrapdynaclass">3.2.4 <code class="language-plaintext highlighter-rouge">WrapDynaBean</code>å’Œ<code class="language-plaintext highlighter-rouge">WrapDynaClass</code></h4>

<p>å¦‚æœï¼Œä½ ä¹ æƒ¯ä½¿ç”¨<code class="language-plaintext highlighter-rouge">DynaBeans</code>å»é€šè¿‡<code class="language-plaintext highlighter-rouge">set</code>å’Œ<code class="language-plaintext highlighter-rouge">get</code>æ–¹æ³•å»å¯¹<code class="language-plaintext highlighter-rouge">DynaBeans</code>è¿›è¡Œå­˜å–å±æ€§ã€‚è€Œæ ‡å‡†çš„JavaBeanè‚¯å®šä¸å…·å¤‡è¿™æ ·çš„æ–¹æ³•ã€‚æ²¡å…³ç³»ï¼Œä½ å¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">WrapDynaBean</code>è®©ç°æœ‰çš„æ ‡å‡†JavaBeanä¹Ÿå¯ä»¥å˜å¾—è¿™æ ·æ›´æ˜“è®¿é—®ã€‚</p>

<p>çœ‹ä¾‹å­ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MyBean bean = ...;
DynaBean wrapper = new WrapDynaBean(bean);
String firstName = wrapper.get("firstName");
</code></pre></div></div>

<h4 id="325-lazy-dynabeans">3.2.5 <code class="language-plaintext highlighter-rouge">Lazy DynaBeans</code></h4>

<p>åŒ…å«æœ‰ä¸‹é¢å‡ ä¸ªç±»ï¼š</p>

<ul>
  <li>LazyDynaBean ä¸€ä¸ªâ€œæ‡’â€åŠ¨æ€Bean</li>
  <li>LazyDynaMap ä¸€ä¸ªè½»é‡çº§çš„å¯ä»¥è½¬æ¢ä¸ºMapçš„DynaBeanã€‚</li>
  <li>LazyDynaList ä¸€ä¸ªå¯ä»¥å­˜æ”¾<code class="language-plaintext highlighter-rouge">DynaBean</code>ã€<code class="language-plaintext highlighter-rouge">java.util.Map</code>æˆ–è€…<code class="language-plaintext highlighter-rouge">POJO</code>çš„â€æ‡’â€åˆ—è¡¨</li>
  <li>LazyDynaClass <code class="language-plaintext highlighter-rouge">MutableDynaClass</code>æ¥å£çš„ä¸€ä¸ªå®ç°</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">Lazy DynaBeans</code>å…·å¤‡ä¸‹é¢çš„ç‰¹æ€§ï¼š</p>
<ul>
  <li>å¯ä»¥é€šè¿‡<code class="language-plaintext highlighter-rouge">set(name, value)</code>æ–¹æ³•è‡ªåŠ¨æ·»åŠ å±æ€§</li>
  <li><code class="language-plaintext highlighter-rouge">List</code>æˆ–<code class="language-plaintext highlighter-rouge">Array</code>çš„åºåˆ—ä¸å¤Ÿæ—¶ï¼Œå¯ä»¥è‡ªåŠ¨å¢é•¿</li>
  <li>è‡ªåŠ¨å®ä¾‹åŒ–ï¼Œåœ¨è°ƒç”¨<code class="language-plaintext highlighter-rouge">setter/getter</code>æ–¹æ³•ä¸­ï¼Œä¼šæ ¹æ®ä¸Šä¸‹æ–‡è¿›è¡Œå®ä¾‹åŒ–ï¼Œåˆ›å»ºå¯¹åº”çš„<code class="language-plaintext highlighter-rouge">Bean</code>ã€<code class="language-plaintext highlighter-rouge">List</code>æˆ–è€…<code class="language-plaintext highlighter-rouge">Map</code>ç­‰å®ä¾‹ã€‚</li>
</ul>

<p>ç®€å•ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">LazyDynaBean</code></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> DynaBean dynaBean = new LazyDynaBean();

 dynaBean.set("foo", "bar");                   // simple

 dynaBean.set("customer", "title", "Mr");      // mapped
 dynaBean.set("customer", "surname", "Smith"); // mapped

 dynaBean.set("address", 0, addressLine1);     // indexed
 dynaBean.set("address", 1, addressLine2);     // indexed
 dynaBean.set("address", 2, addressLine3);     // indexed
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">LazyDynaMap</code></p>

    <p>å¦‚æœä½ æƒ³å°†åŠ¨æ€Beanè½¬æ¢ä¸ºMapï¼Œå¯ä»¥è¿™æ ·ï¼š</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> DynaBean dynaBean = new LazyDynaMap();        // create DynaBean

 dynaBean.set("foo", "bar");                   // simple
 dynaBean.set("customer", "title", "Mr");      // mapped
 dynaBean.set("address", 0, addressLine1);     // indexed

 Map myMap = dynaBean.getMap()                 // retrieve the Map
</code></pre></div>    </div>

    <p>å¦‚æœä½ æƒ³å°†Mapè½¬æ¢ä¸ºåŠ¨æ€Beanï¼Œå¯ä»¥è¿™æ ·ï¼š</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Map myMap = ....                             // exisitng Map
 DynaBean dynaBean = new LazyDynaMap(myMap);  // wrap Map in DynaBean
 dynaBean.set("foo", "bar");                  // set properties
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">LazyDynaList</code></p>

    <ul>
      <li>ä½ å¯ä»¥å°†ä»»æ„ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">java.util.Map[]</code>æ•°å€¼æ”¾åˆ°<code class="language-plaintext highlighter-rouge">LazyDynaList</code>é‡Œé¢å»ï¼š</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> TreeMap[] myArray = .... // your Map[]
 List lazyList = new LazyDynaList(myArray);
</code></pre></div>    </div>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">get(index)</code>æ–¹æ³•å°†è‡ªåŠ¨å¢é•¿listçš„åºåˆ—ï¼š</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> DynaBean newElement = (DynaBean)lazyList.get(lazyList.size());
 newElement.put("someProperty", "someValue");
</code></pre></div>    </div>

    <ul>
      <li>æ“ä½œç»“æŸåï¼Œå¯ä»¥å†è½¬æ¢ä¸ºmap:</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> TreeMap[] myArray = (TreeMap[])lazyList.toArray());
</code></pre></div>    </div>

    <ul>
      <li>ä½ ä¹Ÿå¯ä»¥åˆ›å»ºç©ºçš„åˆ—è¡¨ï¼ŒæŒ‡å®šå…¶ä¸­å…ƒç´ çš„ç±»ï¼Œ<code class="language-plaintext highlighter-rouge">LazyDynaList</code>å¯ä»¥æ ¹æ®æŒ‡å®šçš„ç±»è‡ªåŠ¨å¡«å……å…ƒç´ ï¼š</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> List lazyList = new LazyDynaList(TreeMap.class);
 List lazyList = new LazyDynaList(MyPojo.class);
 List lazyList = new LazyDynaList(MyDynaBean.class);
    
 DynaClass dynaClass = new LazyDynaMap(new HashMap());
 List lazyList = new LazyDynaList(dynaClass);
    
 DynaClass dynaClass = (new WrapDynaBean(myPojo)).getDynaClass();
 List lazyList = new LazyDynaList(dynaClass);
    
 DynaClass dynaClass = new BasicDynaClass(properties);
 List lazyList = new LazyDynaList(dynaClass);
</code></pre></div>    </div>

    <p>ä¸Šé¢ä¹‹æ‰€ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">DynaClass</code>æ¥æ›¿ä»£æ™®é€šçš„<code class="language-plaintext highlighter-rouge">Class</code>ï¼Œæ˜¯å› ä¸ºæœ‰äº›DynaBeançš„å®ç°æ²¡æœ‰é»˜è®¤çš„ç©ºå‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œè€Œ<code class="language-plaintext highlighter-rouge">DynaClass</code>æä¾›äº†<code class="language-plaintext highlighter-rouge">DynaClass.newInstance()</code>æ–¹æ³•ã€‚</p>

    <ul>
      <li>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">setElementType(Class)</code>æˆ–è€…<code class="language-plaintext highlighter-rouge">setElementDynaClass(DynaClass)</code>æ–¹æ³•æ¥è®¾ç½®å…ƒç´ ç±»å‹ï¼Œç„¶åä½¿ç”¨æ™®é€šçš„<code class="language-plaintext highlighter-rouge">java.util.List</code>æ¥å£æä¾›çš„æ–¹æ³•(æ¯”å¦‚:<code class="language-plaintext highlighter-rouge">set/add/addAll</code>)æ¥å¡«å……å…ƒç´ :</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> // Create a new LazyDynaList (100 element capacity)
 LazyDynaList lazyList = new LazyDynaList(100);

 // Either Set the element type...
 lazyList.setElementType(TreeMap.class);

 // ...or the element DynaClass...
 lazyList.setElementDynaClass(new MyCustomDynaClass());

 // Populate from a collection
 lazyList.addAll(myCollection);
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">LazyDynaClass</code></p>

    <p><code class="language-plaintext highlighter-rouge">LazyDynaClass</code>ç»§æ‰¿äº<code class="language-plaintext highlighter-rouge">BasicDynaClass</code>,å®ç°äº†<code class="language-plaintext highlighter-rouge">MutableDynaClass</code>æ¥å£ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨<code class="language-plaintext highlighter-rouge">LazyDynaBean</code>æ—¶ï¼Œæœ‰æ—¶ä¸éœ€è¦å…³ç³»å…¶å†…éƒ¨ç»“æ„ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ“ä½œ<code class="language-plaintext highlighter-rouge">DynaClass</code>ï¼Œä½†æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¼ºåˆ¶å…¶å†…éƒ¨æˆå‘˜ç»“æ„ï¼Œè¿™æ ·å°±éœ€è¦è®¾ç½®<code class="language-plaintext highlighter-rouge">DynaClass</code>ã€‚åšè¿™ç§å¼ºåˆ¶å†…éƒ¨ç»“æ„çš„æ“ä½œï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>

    <ul>
      <li>æˆ‘ä»¬å¯ä»¥å…ˆåˆ›å»º<code class="language-plaintext highlighter-rouge">LazyDynaClass</code>ï¼Œè®¾ç½®ç»“æ„ï¼Œç„¶åå†ç”Ÿæˆ<code class="language-plaintext highlighter-rouge">LazyDynaBean</code>:</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> MutableDynaClass dynaClass = new LazyDynaClass();    // create DynaClass

 dynaClass.add("amount", java.lang.Integer.class);    // add property
 dynaClass.add("orders", OrderBean[].class);          // add indexed property
 dynaClass.add("orders", java.util.TreeMapp.class);   // add mapped property

 DynaBean dynaBean = new LazyDynaBean(dynaClass);     // Create DynaBean with associated DynaClass
</code></pre></div>    </div>

    <ul>
      <li>æˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆç”Ÿæˆ<code class="language-plaintext highlighter-rouge">LazyDynaBean</code>,å†è·å–<code class="language-plaintext highlighter-rouge">DynaClass</code>è®¾ç½®ç»“æ„ï¼š</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> DynaBean dynaBean = new LazyDynaBean();              // Create LazyDynaBean
 MutableDynaClass dynaClass =
           (MutableDynaClass)dynaBean.getDynaClass();  // get DynaClass

 dynaClass.add("amount", java.lang.Integer.class);    // add property
 dynaClass.add("myBeans", myPackage.MyBean[].class);  // add 'array' indexed property
 dynaClass.add("myMap", java.util.TreeMapp.class);    // add mapped property
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="33-æ•°æ®ç±»å‹è½¬æ¢">3.3 æ•°æ®ç±»å‹è½¬æ¢</h4>

<p>BeanUtilsåŒ…æä¾›äº†ä¸€ç³»åˆ—APIå’Œè®¾è®¡æ¨¡å¼æ¥è§£å†³æ•°æ®ç±»å‹è½¬æ¢é—®é¢˜ã€‚</p>

<p>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HttpServletRequest request = ...; 
MyBean bean = ...; 

BeanUtils.populate(bean, request.getParameterMap()); 
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">BeanUtils</code>æ˜¯ä¾èµ–<code class="language-plaintext highlighter-rouge">ConvertUtils</code>æä¾›çš„æ–¹æ³•è¿›è¡Œæ•°æ®è½¬æ¢çš„ï¼Œ<code class="language-plaintext highlighter-rouge">ConvertUtils</code>ä¸æ¨èç›´æ¥ä½¿ç”¨ï¼Œå› ä¸ºä»¥åçš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šè¢«åºŸå¼ƒã€‚</p>

<p>ä½ ä¹Ÿå¯ä»¥å®šåˆ¶è‡ªå·±çš„è½¬æ¢å™¨ï¼Œæ–¹æ³•å¾ˆç®€å•ï¼Œä¸¤ä¸ªæ­¥éª¤ï¼š</p>

<ul>
  <li>å®ç°<code class="language-plaintext highlighter-rouge">Converter</code>æ¥å£ï¼Œåœ¨å…¶ä¸­çš„<code class="language-plaintext highlighter-rouge">convert</code>æ–¹æ³•ä¸­å®ç°ä½ çš„è½¬æ¢è§„åˆ™</li>
  <li>ä½¿ç”¨<code class="language-plaintext highlighter-rouge">ConvertUtils.register()</code>æ–¹æ³•æ³¨å†Œä½ è‡ªå·±çš„è½¬æ¢å™¨</li>
</ul>

<p>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class Person{ 
    private Date birthday; 
    public Date getBirthday() {  
        return birthday;  
	}  
	public void setBirthday(Date birthday) {  
	    this.birthday = birthday;  
	}  
    
    ...
}

//
DateConverter dc = new DateConverter(); 
dc.setPattern("yyyy-mm-dd");
ConvertUtils.register(dc, java.util.Date.class); 

//
Person person = new Person();
String bd = "2014-01-15";
BeanUtils.setProperty(person, "birthday", bd);
</code></pre></div></div>

<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœä¸å®šåˆ¶è½¬æ¢å™¨ï¼Œé‚£ä¹ˆç”Ÿæ—¥çš„å±æ€§è®¾ç½®ä¼šæŠ¥é”™ã€‚</p>

<h4 id="34-é›†åˆ">3.4 é›†åˆ</h4>

<p>ä¸<code class="language-plaintext highlighter-rouge">Apache Commons Collections</code>åŒ…é…åˆï¼Œå»å®ç°ä¸€äº›å¯¹é›†åˆçš„æ“ä½œã€‚æ¯”å¦‚ï¼š</p>

<ul>
  <li>
    <p>æ ¹æ®é›†åˆä¸­beançš„æŸä¸ªå±æ€§å€¼ï¼Œå¯¹é›†åˆä¸­å¾—beanè¿›è¡Œæ’åº</p>

    <p>çœ‹ä»£ç ï¼š</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Collections.sort(peopleCollection, new BeanComparator("firstName"));
</code></pre></div>    </div>
    <p>ä¸Šé¢ä»£ç ï¼Œä¼šæ ¹æ®beanä¸­<code class="language-plaintext highlighter-rouge">firstName</code>å±æ€§å¯¹é›†åˆ<code class="language-plaintext highlighter-rouge">peopleCollection</code>è¿›è¡Œæ’åºã€‚</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Collections.sort(peopleCollection, new BeanComparator("firstName", new ReverseComparator(new ComparableComparator())));
</code></pre></div>    </div>
    <p>ä¸Šé¢ä»£ç æ˜¯åšé€†åºã€‚</p>
  </li>
  <li>
    <p>ä¿®æ”¹é›†åˆä¸­Beançš„æŸå±æ€§å€¼</p>

    <p>çœ‹ä»£ç ï¼š</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  // create the closure
  BeanPropertyValueChangeClosure closure =
       new BeanPropertyValueChangeClosure( "activeEmployee", Boolean.TRUE );

  // update the Collection
  CollectionUtils.forAllDo( peopleCollection, closure );
</code></pre></div>    </div>
    <p>ä¸Šé¢ä»£ç ï¼Œä¼šå°†é›†åˆ<code class="language-plaintext highlighter-rouge">peopleCollection</code>å†…æ‰€æœ‰beançš„å±æ€§<code class="language-plaintext highlighter-rouge">activeEmployee</code>éƒ½è®¾ç½®ä¸º<code class="language-plaintext highlighter-rouge">Boolean.TRUE</code>.</p>
  </li>
  <li>
    <p>é€šè¿‡Beanä¸­æŸå±æ€§å€¼æ˜¯å¦ç›¸ç­‰æ¥å¯¹é›†åˆè¿›è¡Œè¿‡æ»¤</p>

    <p>çœ‹ä»£ç ï¼š</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  // create the predicate
  BeanPropertyValueEqualsPredicate predicate =
       new BeanPropertyValueEqualsPredicate( "activeEmployee", Boolean.FALSE );

  // filter the Collection
  CollectionUtils.filter( peopleCollection, predicate );
</code></pre></div>    </div>
    <p>ä¸Šé¢ä»£ç ï¼Œä¼šå°†é›†åˆ<code class="language-plaintext highlighter-rouge">peopleCollection</code>ä¸­å±æ€§<code class="language-plaintext highlighter-rouge">activeEmployee</code>ä¸ä¸ºfalseçš„beanéƒ½åˆ é™¤ã€‚</p>
  </li>
  <li>
    <p>é€šè¿‡Beançš„å±æ€§è·¯å¾„æ¥è·å–æ•°æ®</p>

    <p>çœ‹ä»£ç ï¼š</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  // create the transformer
  BeanToPropertyValueTransformer transformer = new BeanToPropertyValueTransformer( "person.address.city" );

  // transform the Collection
  Collection peoplesCities = CollectionUtils.collect( peopleCollection, transformer );
</code></pre></div>    </div>
    <p>ä¸Šé¢ä»£ç ï¼Œä¼šå°†é›†åˆ<code class="language-plaintext highlighter-rouge">peopleCollection</code>ä¸­æ‰€æœ‰beançš„<code class="language-plaintext highlighter-rouge">person.address.city</code>å±æ€§å€¼éƒ½æ”¶é›†åˆ°é›†åˆ<code class="language-plaintext highlighter-rouge">peoplesCities</code>ä¸­å»ã€‚</p>
  </li>
</ul>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>Javaç¨‹åºå¯ä»¥åœ¨è¿è¡Œæ˜¯åŠ è½½Classï¼Œè·å–å…¶æ„é€ æ–¹æ³•çš„å®šä¹‰ï¼Œå¹¶ç”Ÿæˆå…¶å¯¹è±¡å®ä½“ã€æˆ–å¯¹å…¶fieldsè®¾å€¼ã€æˆ–å”¤èµ·å…¶methodsã€‚è¿™ç§â€œé€è§†Classâ€çš„èƒ½åŠ›ï¼ˆ<code class="language-plaintext highlighter-rouge">the ability of the program to examine itself</code>ï¼‰ï¼Œè¢«ç§°ä¸º<code class="language-plaintext highlighter-rouge">Introspection</code>Â <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>
:ET