I"Å"<h2 id="ä¸€checkclipseæ’ä»¶å®‰è£…">ä¸€ã€Checkclipseæ’ä»¶å®‰è£…</h2>

<p>Checkclipseæ˜¯ä¸€ä¸ªEclipseæ’ä»¶ï¼Œå®ƒé›†æˆäº†Checkstyleçš„æ ·å¼æ£€æŸ¥å™¨çš„ç¼–ç å‡†åˆ™åˆ°Eclipseä¸­ã€‚æ‰€æœ‰çš„Javaé£æ ¼çš„è¿è§„è¡Œä¸ºå°†è¢«ç«‹å³æŠ¥å‘Šé”™è¯¯æ ‡è®°ã€‚å¯ä»¥ä¸ºæ¯ä¸ªé¡¹ç›®å•ç‹¬é…ç½®ç¼–ç å‡†åˆ™ã€‚</p>

<p>1ã€ä¸‹è½½checkclipse jar åŒ…æ–‡ä»¶<a href="http://sourceforge.jp/projects/sfnet_checkclipse/" title="checkclipse.jar">http://sourceforge.jp/projects/sfnet_checkclipse/</a></p>

<p>2ã€å®‰è£…Checkclipse</p>

<p>è¿™é‡Œæˆ‘é€šè¿‡Help-&gt;Software Updates-&gt;Find and Instaæ–¹å¼å®‰è£…äº†å¥½å‡ æ¬¡æ²¡æœ‰æˆåŠŸï¼Œæœ€ç»ˆé€‰æ‹©ä¸‹è½½æ’ä»¶jaråŒ…æ–¹å¼å®‰è£…ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯ä¸Šé¢é“¾æ¥æ‰“å¼€ååˆ—è¡¨ä¸­çš„de.mvmsoft.checkclipse_3.0.0.b201310301757.jarï¼Œä¸‹è½½åå°†jaråŒ…æ”¾åˆ°Eclipseå®‰è£…ç›®å½•pluginsç›®å½•ä¸‹ï¼Œé‡æ–°å¯åŠ¨Eclipseåœ¨Windowsâ€”&gt;preferencesä¸‹æ‰¾åˆ°checkclipseï¼Œå¦‚å›¾ï¼š</p>

<p><img src="/images/checkclipse.jpg" alt="" /></p>

<h2 id="äºŒ-é…ç½®eclipse-java-google-stylexml">äºŒã€ é…ç½®eclipse-java-google-style.xml</h2>

<p>è¿™é‡Œeclipse-java-google-style.xmlå¯¹GoogleåŸå§‹Eclipse Formatteræ–‡ä»¶è¿›è¡Œäº†éƒ¨åˆ†ä¿®æ”¹ï¼Œæ‰€ä»¥å¤§å®¶ä¸è¦ä¸‹è½½GoogleåŸå§‹æ–‡ä»¶ï¼Œå°±ç”¨æœ¬æ–‡æä¾›çš„eclipse-java-google-style.xmlã€‚</p>

<p>1ã€eclipse-java-google-style.xmlå†…å®¹ï¼š<a href="/xml/eclipse-java-google-style.xml" title="eclipse-java-google-style.xml">eclipse-java-google-style.xml</a></p>

<p>2ã€é…ç½®eclipse-java-google-style.xmlåˆ°Eclipseä¸­</p>

<p><img src="/images/eclipse-java-google-style.xml.png" alt="" /></p>

<h2 id="ä¸‰-é…ç½®javaé»˜è®¤ç”Ÿæˆæ¨¡æ¿">ä¸‰ã€ é…ç½®Javaé»˜è®¤ç”Ÿæˆæ¨¡æ¿</h2>

<p>1ã€åœ¨Windows-&gt;preferences-&gt;Java-&gt;Code Style-&gt;Code Templatesä¸‹æ–°å¢æ–‡ä»¶é»˜è®¤ç”Ÿæˆæ¨¡æ¿ï¼š</p>

<p><img src="/images/JavaFileTemplate.png" alt="" /></p>

<p>2ã€æ–°å»ºJavaç±»æ—¶é€‰æ‹©Generater comments</p>

<p><img src="/images/testTemplate.png" alt="" /></p>

<h2 id="å››-checkstyleæ–‡ä»¶ç¼–å†™åŠé…ç½®">å››ã€ checkStyleæ–‡ä»¶ç¼–å†™åŠé…ç½®</h2>

<h3 id="1checkstyleæ–‡ä»¶ç¼–å†™">1ã€checkStyleæ–‡ä»¶ç¼–å†™</h3>

<p>è¿™é‡Œæä¾›å·²ç»ç¼–å†™å¥½çš„æ–‡ä»¶ï¼Œå†…å®¹<a href="/xml/checkstyle.xml" title="checkstyle.xml">checkstyle.xml</a></p>

<h3 id="2checkstyleæ–‡ä»¶é…ç½®">2ã€checkStyleæ–‡ä»¶é…ç½®</h3>

<p>aã€Checkclipseé…ç½®</p>

<p><img src="/images/checkclispeSet.png" alt="" /></p>

<p>å‹¾é€‰Set Project Dir as Checkjstyle Basedirï¼ŒCheckStyle Configuration Fileé€‰æ‹©ä¸Šé¢ç¼–å†™çš„checkStyle.xmlæ–‡ä»¶</p>

<p>bã€é€‰æ‹©ä½ è¦è¿›è¡Œcheckstyleçš„é¡¹ç›®æ–‡ä»¶ï¼Œé€‰æ‹©Project-&gt;properties</p>

<p><img src="/images/CheckProject.png" alt="" /></p>

<p>å‹¾é€‰Enable CheckStyleã€Set Project ClassLoaderã€‚</p>

<p>cã€okï¼Œå¯ä»¥è¿›è¡ŒJavaä»£ç ç¼–å†™äº†ï¼Œæ­¤æ—¶å¦‚æœæ²¡æœ‰æŒ‰ç…§checkStyle.xmlé‡Œé…ç½®çš„è§„èŒƒè¦æ±‚ç¼–å†™ä»£ç ï¼ŒEclipseä¸­å°†ç»™å‡ºé”™è¯¯æç¤ºï¼š</p>

<p><img src="/images/CheckStyleTest.png" alt="" /></p>

<h2 id="å››-checkstyle-maven-æ’ä»¶ä½¿ç”¨">å››ã€ checkStyle Maven æ’ä»¶ä½¿ç”¨</h2>

<p>checkStyleçš„mavenæ’ä»¶åä¸ºmaven-checkstyle-pluginï¼Œç”¨äºæ‰§è¡ŒCheckStyle taskï¼Œä»¥ä¸‹åˆ—å‡ºå…·ä½“ä½¿ç”¨æ–¹æ³•ï¼š</p>

<h3 id="1maven-pom-æ–‡ä»¶é…ç½®">1ã€maven pom æ–‡ä»¶é…ç½®</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;build&gt;
  &lt;plugins&gt;
	  &lt;plugin&gt;
	    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
	    &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;
	    &lt;version&gt;2.10&lt;/version&gt;
	    &lt;configuration&gt;
	        &lt;configLocation&gt;D:\codingStandards\checkstyle.xml&lt;/configLocation&gt;
	    &lt;/configuration&gt;
	    &lt;executions&gt;
	        &lt;execution&gt;
	            &lt;id&gt;checkstyle&lt;/id&gt;
	            &lt;phase&gt;validate&lt;/phase&gt;
	            &lt;goals&gt;
	                &lt;goal&gt;check&lt;/goal&gt;
	            &lt;/goals&gt;
	            &lt;configuration&gt;
	                &lt;failOnViolation&gt;true&lt;/failOnViolation&gt;
	            &lt;/configuration&gt;
	        &lt;/execution&gt;
	    &lt;/executions&gt;
	  &lt;/plugin&gt;
   &lt;/plugins&gt;
</code></pre></div></div>
<p>&lt;/build&gt;</p>

<p>å…¶ä¸­D:\codingStandards\checkstyle.xmlå³ä¸ºä¸Šé¢æˆ‘ä»¬ç¼–å†™çš„checkstyleè§„èŒƒæ–‡ä»¶</p>

<h3 id="2è¿è¡Œcheckstyleæ£€æŸ¥">2ã€è¿è¡Œcheckstyleæ£€æŸ¥</h3>

<p>å‘½ä»¤è¡Œä¸‹æ‰§è¡Œmvn checkstyle:checkstyle æˆ–ç›´æ¥é€šè¿‡Eclipseæ’ä»¶ä¸­ Maven testç­‰æ‰§è¡Œæ–¹æ³•ï¼Œæˆ‘ç”¨çš„Maven test</p>

<h3 id="3æ£€æŸ¥checkstyleç»“æœ">3ã€æ£€æŸ¥checkstyleç»“æœ</h3>

<p>è¿è¡Œmavenå‘½ä»¤åå¯ä»¥åœ¨consoleé‡ŒæŸ¥çœ‹checkstyleè¿è¡Œç»“æœã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 22.926s
[INFO] Finished at: Thu Sep 18 09:28:04 CST 2014
[INFO] Final Memory: 5M/9M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:2.10:check 

(checkstyle) on project maven-script-test: You have 1 Checkstyle violation. -&gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
</code></pre></div></div>

<p>checkstyeçš„è¯¦ç»†ç»“æœä¿¡æ¯è¢«å­˜æ”¾åœ¨target/checkstyle-result.xmlä¸­ã€‚ä¸‹é¢æ˜¯å…·ä½“ä¿¡æ¯ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;checkstyle version="5.6"&gt;
&lt;file name="D:\workspace\maven-script-test\src\main\java\javassisttest\Test1.java"&gt;
&lt;error line="22" severity="error" message="Line is longer than 120 characters (found 124)."  source="

com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"/&gt;
&lt;/file&gt;
&lt;file name="D:\workspace\maven-script-test\src\main\java\mveltest\GetNameTest.java"&gt;
&lt;/file&gt;
&lt;file name="D:\workspace\maven-script-test\src\main\java\mveltest\MvelTest.java"&gt;
&lt;error line="9" severity="warning" message="Wrong order for &amp;apos;org.mvel2.MVEL&amp;apos; import."  source=

"com.puppycrawl.tools.checkstyle.checks.imports.ImportOrderCheck"/&gt;
&lt;/file&gt;
&lt;/checkstyle&gt;
</code></pre></div></div>

<p>ä»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡º Test1.java 22è¡Œæœ‰ä¸€ä¸ªè¡Œå­—ç¬¦æ•°è¶…è¿‡120çš„é”™è¯¯ï¼ŒMvelTest.java 9è¡Œæœ‰ä¸ªæç¤ºã€‚</p>

<h3 id="4å¯¹æŒ‡å®šæ–‡ä»¶ä¸æ£€æŸ¥">4ã€å¯¹æŒ‡å®šæ–‡ä»¶ä¸æ£€æŸ¥</h3>

<p>å¯¹ä¸Šé¢ä¾‹å­ä¸­è¡Œè¶…è¿‡äº†120å­—ç¬¦ã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³ä¿®å¤è¿™ä¸ªé”™è¯¯æ€ä¹ˆåŠé‚£ï¼Ÿå¯ä»¥å°†å…¶suppressæ‰ã€‚
æ–¹æ³•æ˜¯å»ºç«‹ä¸€ä¸ªcheckstyle-suppressions.xmlæ–‡ä»¶ã€‚å…¶ä¸­åŠ å…¥ä¸‹è¿°å†…å®¹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?xml version="1.0"?&gt;

&lt;!DOCTYPE suppressions PUBLIC
        "-//Puppy Crawl//DTD Suppressions 1.0//EN"
        "http://www.puppycrawl.com/dtds/suppressions_1_0.dtd"&gt;

&lt;suppressions&gt;
    &lt;suppress checks="LineLengthCheck"
              files="Test1.java"
              /&gt;
&lt;/suppressions&gt;
</code></pre></div></div>

<p>ç„¶ååœ¨pomæ–‡ä»¶<configuration>èŠ‚ç‚¹å†…checkstyle.xmlé…ç½®ä¸‹é¢åŠ å…¥checkstyle-suppressions.xmlé…ç½®ï¼Œå¦‚ï¼š</configuration></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;configuration&gt;
    &lt;configLocation&gt;D:\codingStandards\checkstyle.xml&lt;/configLocation&gt;
    &lt;suppressionsLocation&gt;D:\codingStandards\checkstyle-suppressions.xml&lt;/suppressionsLocation&gt;
&lt;/configuration&gt;
</code></pre></div></div>

<p>ç°åœ¨å†è¿è¡Œçœ‹çœ‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ maven-script-test ---
[INFO] Surefire report directory: D:\workspace\maven-script-test\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.956s
[INFO] Finished at: Thu Sep 18 10:08:12 CST 2014
[INFO] Final Memory: 6M/11M
[INFO] ------------------------------------------------------------------------
</code></pre></div></div>

<p>OKï¼è¿è¡Œæ²¡æœ‰å¼‚å¸¸äº†ï¼Œåˆšåˆšçš„è¡Œé™åˆ¶è¢«è·³è¿‡äº†ã€‚</p>
:ET