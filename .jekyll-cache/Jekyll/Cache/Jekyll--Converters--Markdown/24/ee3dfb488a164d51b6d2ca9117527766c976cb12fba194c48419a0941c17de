I"àF<h2 id="ä¸€å¸¸ç”¨sourcesä»‹ç»">ä¸€ã€å¸¸ç”¨Sourcesä»‹ç»</h2>

<p>æ­¤å¤„ä»‹ç»çš„ Sources æœ‰ï¼šAvro Sourceã€Thrift Sourceã€Exec Sourceã€Spooling Directory Sourceã€‚</p>

<h3 id="avro-source">Avro Source</h3>

<p>ç›‘å¬ Avro ç«¯å£ï¼Œæ¥æ”¶å¤–éƒ¨ Avro å®¢æˆ·ç«¯å‘æ¥çš„ Event æ˜¯æµï¼Œå½“å’Œå¦ä¸€ä¸ªAgent (Eventæµä¸Šï¼Œå‰é¢ä¸€ä¸ª) çš„ Avro Sink è¿æ¥é…å¯¹æ—¶ï¼Œèƒ½å¤Ÿå°†ä¸¤ä¸ª Agent è¿æ¥å½¢æˆä¸€ä¸ªEvent é“¾ã€‚å…¶å¿…é¡»çš„å±æ€§å¦‚ä¸‹ï¼š</p>

<table width="100%">
<tr><th width="15%">å±æ€§å</th><th width="10%">é»˜è®¤å€¼</th><th>æè¿°</th></tr>
<tr><td width="15%">channels</td><td width="10%">-</td><td></td></tr>
<tr><td width="15%">type</td><td width="10%">-</td><td>ç»„ä»¶ç±»å‹åç§°å¿…é¡»æ˜¯<code>avro</code></td></tr>
<tr><td width="15%">bind</td><td width="10%">-</td><td>ç›‘å¬çš„ä¸»æœºåæˆ–è€… IP åœ°å€</td></tr>
<tr><td width="15%">port</td><td width="10%">-</td><td>ç›‘å¬çš„ç«¯å£å·</td></tr>
<tr><td width="15%">threads</td><td width="10%">-</td><td>èƒ½ç”Ÿæˆçš„å·¥ä½œçº¿ç¨‹çš„æœ€å¤§æ•°</td></tr>
<tr><td width="15%">selector.type</td><td width="10%"></td><td></td></tr>
<tr><td width="15%">selector.*</td><td width="10%"></td><td></td></tr>
<tr><td width="15%">interceptors</td><td width="10%">-</td><td>Space-separated list of interceptors</td></tr>
<tr><td width="15%">interceptors.*</td><td width="10%"></td><td></td></tr>
<tr><td width="15%">compression-type</td><td width="10%">none</td><td>å¯é€‰é¡¹ä¸ºâ€œnoneâ€æˆ–â€œdeflateâ€ï¼Œcompression-typeå¿…é¡»ç¬¦åˆåŒ¹é…AvroSourceçš„compression-type</td></tr>
<tr><td width="15%">ssl</td><td width="10%">false</td><td>è®¾ç½®ä¸º<code>true</code>å¯ç”¨SSLåŠ å¯†ï¼ŒåŒæ—¶å¿…é¡»åˆ¶å®šä¸€ä¸ªâ€œkeystoreâ€å’Œä¸€ä¸ªâ€œkeystore-passwordâ€</td></tr>
<tr><td width="15%">keystore</td><td width="10%">-</td><td>Java keystoreæ–‡ä»¶çš„è·¯å¾„ï¼Œéœ€è¦å¯ç”¨SSLåŠ å¯†</td></tr>
<tr><td width="15%">keystore-password</td><td width="10%">-</td><td>Java keystoreçš„å¯†ç ï¼Œéœ€è¦å¯ç”¨SSlåŠ å¯†</td></tr>
<tr><td width="15%">keystore-type</td><td width="10%">JKS</td><td>Java keystoreçš„ç±»å‹ï¼Œå¯é€‰é¡¹ä¸ºï¼šâ€œJSKâ€ å’Œ â€œPKCS12â€</td></tr>
<tr><td width="15%">exclude-protocols</td><td width="10%">SSLv3</td><td>Space-separated list of SSL/TLS protocols to exclude. SSLv3 will always be excluded in addition to the protocols specified.</td></tr>
<tr><td width="15%">ipFilter</td><td width="10%">false</td><td>è®¾ç½®ä¸º<code>true</code>å¯ç”¨ipè¿‡æ»¤</td></tr>
<tr><td width="15%">ipFilter.rules</td><td width="10%">-</td><td>é€šè¿‡æ­¤é…ç½®ï¼Œå®šä¹‰ipè¿‡æ»¤çš„è¡¨è¾¾å¼è§„åˆ™</td></tr>
</table>

<p>å®ä¾‹ <code class="language-plaintext highlighter-rouge">Agent a1</code>ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a1.sources = r1
a1.channels = c1
a1.sources.r1.type = avro
a1.sources.r1.bind = localhost
a1.sources.r1.port = 4141
a1.sources.r1.ipFilter = true
a1.sources.r1.ipFilter.rules = allow:ip:127.*,allow:name:localhost,deny:ip:*

a1.sources.r1.channels = c1
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">ipFilter.rules</code>å®šä¹‰æ ¼å¼å¦‚ä¸‹ ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;allow or deny&gt;:&lt;ip or name for computer name&gt;:&lt;pattern&gt; æˆ–

allow/deny:ip/name:pattern
</code></pre></div></div>

<h3 id="thrift-source">Thrift Source</h3>
<p>ç›‘å¬ Thrift ç«¯å£ï¼Œæ¥æ”¶å¤–éƒ¨ Thrift å®¢æˆ·ç«¯å‘æ¥çš„ Event æ˜¯æµï¼Œå½“å’Œå¦ä¸€ä¸ªAgent (Eventæµä¸Šï¼Œå‰é¢ä¸€ä¸ª) çš„ Thrift Sink è¿æ¥é…å¯¹æ—¶ï¼Œèƒ½å¤Ÿå°†ä¸¤ä¸ª Agent è¿æ¥å½¢æˆä¸€ä¸ªEvent é“¾ã€‚å…¶å¿…é¡»çš„å±æ€§å¦‚ä¸‹ï¼š</p>

<table width="100%">
<tr><th width="15%">å±æ€§å</th><th width="10%">é»˜è®¤å€¼</th><th>æè¿°</th></tr>
<tr><td width="15%">channels</td><td width="10%">-</td><td></td></tr>
<tr><td width="15%">type</td><td width="10%">-</td><td>ç»„ä»¶ç±»å‹åç§°å¿…é¡»æ˜¯<code>thrift</code></td></tr>
<tr><td width="15%">bind</td><td width="10%">-</td><td>ç›‘å¬çš„ä¸»æœºåæˆ–è€… IP åœ°å€</td></tr>
<tr><td width="15%">port</td><td width="10%">-</td><td>ç›‘å¬çš„ç«¯å£å·</td></tr>
<tr><td width="15%">threads</td><td width="10%">-</td><td>èƒ½ç”Ÿæˆçš„å·¥ä½œçº¿ç¨‹çš„æœ€å¤§æ•°</td></tr>
<tr><td width="15%">selector.type</td><td width="10%"></td><td></td></tr>
<tr><td width="15%">selector.*</td><td width="10%"></td><td></td></tr>
<tr><td width="15%">interceptors</td><td width="10%">-</td><td>Space-separated list of interceptors</td></tr>
<tr><td width="15%">interceptors.*</td><td width="10%"></td><td></td></tr>
</table>

<p>å®ä¾‹ï¼Œ<code class="language-plaintext highlighter-rouge">Agent a1</code>ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a1.sources = r1
a1.channels = c1
a1.sources.r1.type = thrift
a1.sources.r1.channels = c1
a1.sources.r1.bind = 0.0.0.0
a1.sources.r1.port = 4141
</code></pre></div></div>

<h3 id="exec-source">Exec Source</h3>
<p>Exec Source è¿è¡Œä¸€ä¸ªç»™å®šçš„ Unix å‘½ä»¤ï¼Œæ­¤å‘½ä»¤éœ€è¦åœ¨å¯åŠ¨åï¼Œè¿›ç¨‹èƒ½ä¸æ–­çš„äº§ç”Ÿæ•°æ®åˆ°æ ‡å‡†è¾“å‡º( é™¤éå°† <code class="language-plaintext highlighter-rouge">logStdErr</code> è®¾ç½®ä¸º <code class="language-plaintext highlighter-rouge">true</code>ï¼Œå¦åˆ™æ ‡å‡†é”™è¯¯è¾“å‡ºstderrå°†ä¼šè¢«æŠ›å¼ƒ )ã€‚å¦‚æœ Unix å‘½ä»¤è¿›ç¨‹æ„å¤–é€€å‡ºäº†ï¼ŒExec Source ä¹Ÿä¼šé€€å‡ºï¼Œä¸ä¼šå†äº§ç”Ÿæ•°æ®ã€‚è¿™æ„å‘³ç€é…ç½®å¦‚ <code class="language-plaintext highlighter-rouge">cat [named pipe]</code> æˆ– <code class="language-plaintext highlighter-rouge">tail -F [file]</code> å‘½ä»¤çš„æ—¶å€™å°†ä¼šäº§ç”ŸæœŸæœ›çš„ç»“æœï¼Œè€Œä½¿ç”¨ <code class="language-plaintext highlighter-rouge">date</code> å‘½ä»¤çš„æ—¶å€™ä¸ä¼šï¼Œå‰é¢ä¸¤ä¸ªå‘½ä»¤ä¼šäº§ç”Ÿæ•°æ®æµï¼Œä½†æ˜¯åé¢ä¸€ä¸ªä»»åŠ¡åªä¼šäº§ç”Ÿä¸€ä¸ªå•ä¸€çš„ Eventï¼Œç„¶åé©¬ä¸Šé€€å‡ºã€‚å…¶configå±æ€§å¦‚ä¸‹ï¼š</p>

<table width="100%">
<tr><th width="15%">å±æ€§å</th><th width="10%">é»˜è®¤å€¼</th><th>æè¿°</th></tr>
<tr><td width="15%">channels</td><td width="10%">-</td><td></td></tr>
<tr><td width="15%">type</td><td width="10%">-</td><td>ç»„ä»¶ç±»å‹åç§°å¿…é¡»æ˜¯<code>exec</code></td></tr>
<tr><td width="15%">command</td><td width="10%">-</td><td>éœ€è¦æ‰§è¡Œçš„å‘½ä»¤</td></tr>
<tr><td width="15%">shell</td><td width="10%">-</td><td>è°ƒç”¨æ¥è¿è¡Œå‘½ä»¤çš„shellï¼Œå¦‚ï¼š<code>/bin/sh -c</code>ï¼ŒRequired only for commands relying on shell features like wildcards, back ticks, pipes etc.</td></tr>
<tr><td width="15%">restartThrottle</td><td width="10%">10000</td><td>é‡å¯ä¹‹å‰çš„ç­‰å¾…æ—¶é—´(ms
)</td></tr>
<tr><td width="15%">resstart</td><td width="10%">false</td><td>è®¾ç½®æ˜¯å¦é‡å¯å‘½ä»¤ï¼Œå¦‚æœå‘½ä»¤è¿›ç¨‹æ­»äº†</td></tr>
<tr><td width="15%">logStdErr</td><td width="10%">false</td><td>è®¾ç½®æ˜¯å¦å‘½ä»¤çš„æ ‡å‡†é”™è¯¯è¾“å‡ºä¼šè¢«å‘é€</td></tr>
<tr><td width="15%">batchSize</td><td width="10%">20</td><td>åŒæ—¶è¯»å–å’Œå‘é€çš„æœ€å¤§è¡Œæ•°</td></tr>
<tr><td width="15%">selector.type</td><td width="10%">replicating</td><td>replicating æˆ– multiplexing</td></tr>
<tr><td width="15%">selector.*</td><td width="10%"></td><td>ä¾èµ–selector.typeçš„å€¼</td></tr>
<tr><td width="15%">interceptors</td><td width="10%">-</td><td>Space-separated list of interceptors</td></tr>
<tr><td width="15%">interceptors.*</td><td width="10%"></td><td></td></tr>
</table>

<p><strong><em>æ³¨æ„ï¼šå¯ä»¥ä½¿ç”¨Exec Source æ¨¡ä»¿Flume 0.9x ( flume-og )ä¸­çš„ Tail Sourceï¼Œåªè¦ä½¿ç”¨ Unix å‘½ä»¤<code class="language-plaintext highlighter-rouge">tail -F /full/path/to/your/file</code>ï¼Œåœ¨æ­¤æƒ…å†µä¸‹ï¼Œå‚æ•° <code class="language-plaintext highlighter-rouge">-F</code>æ¯” <code class="language-plaintext highlighter-rouge">-f</code>è¦æ›´å¥½ï¼Œå› ä¸ºå®ƒä¼šæ ¹æ®æ–‡ä»¶è½®è¯¢ã€‚</em></strong></p>

<p>å®ä¾‹ï¼Œ<code class="language-plaintext highlighter-rouge">Agent a1</code>ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a1.sources = r1
a1.channels = c1
a1.sources.r1.type = exec
a1.sources.r1.command = tail -F /var/log/secure
a1.sources.r1.channels = c1
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">shell</code>é…ç½®æ¥æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">command</code>ï¼Œé€šè¿‡ä¸€ä¸ªå‘½ä»¤è¡Œè„šæœ¬( å¦‚ Bash æˆ– PowerShell )ï¼Œ</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>agent_foo.sources.tailsource-1.type = exec
agent_foo.sources.tailsource-1.shell = /bin/bash -c
agent_foo.sources.tailsource-1.command = for i in /path/*.txt; do cat $i; done
</code></pre></div></div>

<h3 id="spooling-directory-source">Spooling Directory Source</h3>
<p>SpoolDir Source æ”¯æŒä»ç£ç›˜â€œspoolingâ€æ–‡ä»¶å¤¹è¯»å–æ•°æ®æ–‡ä»¶ï¼Œæ­¤æºä¼šç›‘æ§æŒ‡å®šçš„æ–‡ä»¶å¤¹çš„æ–°å¢æ–‡ä»¶ï¼Œä¸€æ—¦æœ‰æ–°æ–‡ä»¶å‡ºç°ï¼ŒSpoolDir Source ä¼šå°†å…¶è§£æä¸º Eventå‘é€ï¼Œè¿™ä¸ª Event è§£æé€»è¾‘æ—¶æ’ä»¶åŒ–çš„ã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶è¢«å…¨éƒ¨è¯»å…¥åˆ° Channel ä¹‹åï¼Œ è¯¥æ–‡ä»¶ä¼šè¢«é‡å‘½åæ ‡è®°å®Œæˆ( æˆ–é€‰æ‹©æ€§çš„åˆ é™¤ )ã€‚</p>

<p>ä¸åŒäº Exec Sourceï¼Œè¿™ä¸ªæºæ˜¯å¯é çš„ï¼Œå³ä½¿ Flume è¿›ç¨‹é‡å¯æˆ–æ˜¯è¢«æ€æ‰éƒ½ä¸ä¼šä¸¢å¤±æ•°æ®ã€‚ä½œä¸ºå¯é æ€§çš„äº¤æ¢ï¼Œåªæœ‰ä¸å˜çš„ä¸”å‘½åå”¯ä¸€çš„æ–‡ä»¶æ‰èƒ½è¢«æ”¾å…¥æºç›‘æ§çš„ç›®å½•ï¼ŒFlume ä¼šæ£€æµ‹è¿™äº›é—®é¢˜æ¡ä»¶ï¼Œå¦‚æœè¿åäº†ï¼ŒFlume ä¼šæŠ¥é”™ï¼š</p>

<ol>
  <li>å¦‚æœä¸€ä¸ªæ–‡ä»¶åœ¨ç§»åŠ¨åˆ° SpoolDir Source ç›‘æ§ç›®å½•ä¸‹ä¹‹åè¢«æ›´æ”¹è¿‡ï¼ŒFlume ä¼šåœ¨æ—¥å¿—æ–‡ä»¶ä¸­è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶åœæ­¢ Flume è¿›ç¨‹ï¼›</li>
  <li>å¦‚æœä¸€ä¸ªæ–‡ä»¶ååœ¨ä¸€æ®µæ—¶é—´åè¢«é‡å¤ä½¿ç”¨ï¼ŒFlume ä¼šåœ¨æ—¥å¿—æ–‡ä»¶ä¸­è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶åœæ­¢ Flume è¿›ç¨‹ã€‚</li>
</ol>

<p>ä¸ºäº†é¿å…ä¸Šè¿°é—®é¢˜ï¼Œæ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯ï¼šåœ¨æ—¥å¿—æ–‡ä»¶è¢«ç§»åŠ¨åˆ°ç›‘æ§ç›®å½•æ—¶ï¼Œç»™æ—¥å¿—æ–‡ä»¶ç”¨å”¯ä¸€æ ‡ç¤ºç¬¦æ¥å‘½å( ä¾‹å¦‚ï¼šæ—¶é—´æˆ³ï¼Œtimestamp )ï¼›</p>

<table width="100%">
<tr><th width="15%">å±æ€§å</th><th width="10%">é»˜è®¤å€¼</th><th>æè¿°</th></tr>
<tr><td width="15%">channels</td><td width="10%">-</td><td></td></tr>
<tr><td width="15%">type</td><td width="10%">-</td><td>ç»„ä»¶ç±»å‹åç§°å¿…é¡»æ˜¯<code>spooldir</code></td></tr>
<tr><td width="15%">spoolDir</td><td width="10%">-</td><td>æºç›‘æ§çš„ç›®å½•è·¯å¾„</td></tr>
<tr><td width="15%">fileSuffix</td><td width="10%">.COMPLETED</td><td>æ–‡ä»¶è¢«è¯»å…¥å®Œæˆåæ·»åŠ çš„æ ‡ç¤ºç¬¦åç¼€</td></tr>
<tr><td width="15%">deletePolicy</td><td width="10%">never</td><td>æ˜¯å¦åˆ é™¤å®Œæˆè¯»å…¥çš„æ–‡ä»¶ï¼Œå¯é€‰é¡¹ï¼š<code>never</code> æˆ– <code>immediate</code></td></tr>
<tr><td width="15%">fileHeader</td><td width="10%">false</td><td>æ˜¯å¦æ·»åŠ ä¸€ä¸ªä¿å­˜æ–‡ä»¶ç»å¯¹è·¯å¾„çš„ Header</td></tr>
<tr><td width="15%">fileHeaderKey</td><td width="10%">file</td><td>å½“ç»™ event header æ·»åŠ ç»å¯¹è·¯å¾„åçš„æ—¶å€™ä½¿ç”¨</td></tr>
<tr><td width="15%">basenameHeader</td><td width="10%">false</td><td>æ˜¯å¦æ·»åŠ ä¸€ä¸ªä¿å­˜æ–‡ä»¶ <code>basename</code> çš„Header</td></tr>
<tr><td width="15%">basenameHeaderKey</td><td width="10%">basename</td><td>å½“ç»™ event header æ·»åŠ  <code>basename</code> çš„æ—¶å€™ä½¿ç”¨</td></tr>
<tr><td width="15%">ignorePattern</td><td width="10%">^$</td><td>å¿½ç•¥æ­£åˆ™è¡¨è¾¾å¼æŒ‡å®šçš„æ–‡ä»¶</td></tr>
<tr><td width="15%">trackerDir</td><td width="10%">.flumespool</td><td>ä¿å­˜è·Ÿè¿›ç¨‹æ–‡ä»¶ç›¸å…³å…ƒæ•°æ®çš„ç›®å½•ï¼Œå¦‚æœæ­¤è·¯å¾„ä¸æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œå°±ä¼šè§£é‡Šä¸ºä¸€ä¸ªç›¸å¯¹äº <code>spoolDir</code> çš„è·¯å¾„ã€‚</td></tr>
<tr><td width="15%">consumeOrder</td><td width="10%">oldest</td><td>ç›‘æ§ç›®å½•ä¸‹çš„æ–‡ä»¶è¢«è¯»å–çš„é¡ºåºï¼Œå¯é€‰é¡¹ä¸ºï¼š<code>oldest</code>ã€<code>youngest</code>ã€<code>random</code></td></tr>
<tr><td width="15%">maxBackoff</td><td width="10%">4000 ( ms )</td><td>å½“ Channel æ»¡äº†ä¹‹åï¼Œè¿ç»­å°è¯•å¾€ Channel ä¼ é€æ•°æ®çš„æœ€å¤§æ—¶é—´é—´éš”ã€‚SpoolDir Source å¼€å§‹ä¼šå¯åŠ¨ä¸€ä¸ªå¾ˆä½çš„ <code>maxBackoff</code>ï¼Œä¸€æ—¦ Channel æŠ›å‡ºä¸€ä¸ª <code>ChannelException</code> çš„æ—¶å€™ï¼Œå°±ä¼šå¢åŠ æ­¤ <code>maxBackoff</code> å€¼ï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šçš„æœ€å¤§å€¼ã€‚</td></tr>
<tr><td width="15%">batchSize</td><td width="10%">100</td><td>æ•°æ®è¢«ä¼ é€åˆ° Channel çš„ç²’åº¦ã€‚</td></tr>
<tr><td width="15%">inputCharset</td><td width="10%">UTF-8</td><td>å°†è¾“å…¥å½“åšæ–‡æœ¬æ–‡æ¡£è§£ææ—¶å€™ä½¿ç”¨çš„å­—ç¬¦é›†ï¼Œå³ç›‘æ§æ–‡ä»¶çš„å­—ç¬¦é›†</td></tr>
<tr><td width="15%">decodeErrorPolicy</td><td width="10%"><code>FAIL</code></td><td>å½“å‘ç°ä¸€ä¸ªæ— æ³•è§£æå­—ç¬¦é›†çš„è¾“å…¥æ–‡ä»¶æ—¶ï¼Œéœ€è¦åšçš„å¤„ç†ï¼š<code>FAIL</code>ï¼ŒæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¹¶æ ‡è®°è§£æå¤±è´¥ï¼›<code>REPLACE</code>ï¼Œä½¿ç”¨ â€œreplacement characterâ€ å­—ç¬¦é‡å¤è§£æé”™è¯¯è§£æå­—ç¬¦ï¼Œä¾‹å¦‚ Unicode U+FFFDï¼›<code>IGNORE</code>ï¼Œåˆ é™¤æ— æ³•è§£æçš„å­—ç¬¦ä¸²åºåˆ—ã€‚</td></tr>
<tr><td width="15%">deserializer</td><td width="10%"><code>LINE</code></td><td>æŒ‡å®šå°†æ–‡ä»¶è§£æä¸º Event çš„è§£æå™¨ï¼Œé»˜è®¤è§£ææ¯è¡Œä¸ºä¸€ä¸ª Eventï¼ŒæŒ‡å®šçš„é™å®šæ€§ç±»åå¿…é¡»å®ç°æ¥å£ <code>EventDeserializer.Builder</code></td></tr>
<tr><td width="15%">deserializer.*</td><td width="10%"></td><td>Varies per event deserializer.</td></tr>
<tr><td width="15%">bufferMaxLines</td><td width="10%">-</td><td>è¯¥é€‰é¡¹å·²ç»è¢«å¿½ç•¥</td></tr>
<tr><td width="15%">bufferMaxLineLength</td><td width="10%">5000</td><td>(Deprecated) æäº¤ç¼“å­˜ä¸­ä¸€è¡Œçš„æœ€å¤§é•¿åº¦ï¼Œä½¿ç”¨ <code>deserializer.maxLineLength</code> ä»£æ›¿ã€‚</td></tr>
<tr><td width="15%">selector.type</td><td width="10%">replicating</td><td>replicating æˆ– multiplexing</td></tr>
<tr><td width="15%">selector.*</td><td width="10%"></td><td>ä¾èµ–selector.typeçš„å€¼</td></tr>
<tr><td width="15%">interceptors</td><td width="10%">-</td><td>Space-separated list of interceptors</td></tr>
<tr><td width="15%">interceptors.*</td><td width="10%"></td><td></td></tr>
</table>

<p>å®ä¾‹ï¼Œ<code class="language-plaintext highlighter-rouge">Agent agent-1</code>ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>agent-1.channels = ch-1
agent-1.sources = src-1

agent-1.sources.src-1.type = spooldir
agent-1.sources.src-1.channels = ch-1
agent-1.sources.src-1.spoolDir = /var/log/apache/flumeSpool
agent-1.sources.src-1.fileHeader = true
</code></pre></div></div>

<h3 id="netcat-source">NetCat Source</h3>
<table width="100%">
<tr><th width="15%">å±æ€§å</th><th width="10%">é»˜è®¤å€¼</th><th>æè¿°</th></tr>
<tr><td width="15%">channels</td><td width="10%">-</td><td></td></tr>
<tr><td width="15%">type</td><td width="10%">-</td><td>ç»„ä»¶ç±»å‹åç§°å¿…é¡»æ˜¯<code>netcat</code></td></tr>
<tr><td width="15%">bind</td><td width="10%">-</td><td>ç›‘å¬ä¸»æœºåæˆ–ipåœ°å€</td></tr>
<tr><td width="15%">port</td><td width="10%">-</td><td>ç›‘å¬ç«¯å£å·</td></tr>
<tr><td width="15%">max-line-length</td><td width="10%">512</td><td>æ¯ä¸ª event å†…å®¹çš„æœ€å¤§è¡Œæ•° ( å•ä½ï¼šå­—èŠ‚ )&lt;/code&gt;</td></tr>
<tr><td width="15%">ack-every-event</td><td width="10%">true</td><td>æ¯æ¥æ”¶åˆ°ä¸€ä¸ª event åˆ™å›å‘ä¸€ä¸ª OK</td></tr>
<tr><td width="15%">selector.type</td><td width="10%">replicating</td><td>replicating æˆ– multiplexing</td></tr>
<tr><td width="15%">selector.*</td><td width="10%"></td><td>ä¾èµ–selector.typeçš„å€¼</td></tr>
<tr><td width="15%">interceptors</td><td width="10%">-</td><td>Space-separated list of interceptors</td></tr>
<tr><td width="15%">interceptors.*</td><td width="10%"></td><td></td></tr>
</table>

<p>å®ä¾‹ï¼Œ<code class="language-plaintext highlighter-rouge">Agnet a1</code>ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a1.sources = r1
a1.channels = c1
a1.sources.r1.type = netcat
a1.sources.r1.bind = 0.0.0.0
a1.sources.r1.bind = 6666
a1.sources.r1.channels = c1
</code></pre></div></div>

<h2 id="äºŒevent-deserializers">äºŒã€Event Deserializers</h2>
<p>ä»¥ä¸‹æ˜¯ Flume é™„å¸¦çš„ Event è§£æå™¨ï¼šLineã€Avroã€BlobDeserializerã€‚</p>

<h3 id="line">Line</h3>
<p>æ­¤ deserializer å¯¹åº”æ–‡æœ¬è¾“å…¥çš„æ¯ä¸€è¡Œç”Ÿæˆä¸€ä¸ª eventã€‚</p>

<table width="100%">
<tr><th width="15%">å±æ€§å</th><th width="10%">é»˜è®¤å€¼</th><th>æè¿°</th></tr>
<tr><td width="15%">deserializer.maxLineLength</td><td width="10%">2048</td><td>å•ä¸ª event èƒ½åŒ…å«å­—ç¬¦çš„æœ€å¤§æ•°ï¼Œå¦‚æœä¸€è¡Œè¶…è¿‡äº†è¿™ä¸ªé•¿åº¦ï¼Œå°†ä¼šè¢«æˆªæ–­ï¼Œè¯¥è¡Œä¸­æˆªæ–­åå‰©ä½™çš„å­—ç¬¦ä¼šå‡ºç°åœ¨åç»­çš„ event ä¸­</td></tr>
<tr><td width="15%">deserializer.outputCharset</td><td width="10%">UTF-8</td><td>å‘é€åˆ° Channel çš„æ¯ä¸ª event çš„ç¼–ç å­—ç¬¦é›†</td></tr>
</table>

<h3 id="avro">AVRO</h3>
<p>è¯¦æƒ…è§<strong><em><a href="http://flume.apache.org/FlumeUserGuide.html#avro" title="http://flume.apache.org/FlumeUserGuide.html#avro">AVRO Deserializer</a></em></strong></p>
<table width="100%">
<tr><th width="15%">å±æ€§å</th><th width="10%">é»˜è®¤å€¼</th><th>æè¿°</th></tr>
<tr><td width="15%">deserializer.schemaType</td><td width="10%">HASH</td><td>How the schema is represented. By default, or when the value HASH is specified, the Avro schema is hashed and the hash is stored in every event in the event header â€œflume.avro.schema.hashâ€. If LITERAL is specified, the JSON-encoded schema itself is stored in every event in the event header â€œflume.avro.schema.literalâ€. Using LITERAL mode is relatively inefficient compared to HASH mode.</td></tr>
</table>

<h3 id="blobdeserializer">BlobDeserializer</h3>
<p>è¯¦æƒ…è§<strong><em><a href="http://flume.apache.org/FlumeUserGuide.html#blobdeserializer" title="http://flume.apache.org/FlumeUserGuide.html#blobdeserializer">Blob Deserializer</a></em></strong></p>

<table width="100%">
<tr><th width="15%">å±æ€§å</th><th width="10%">é»˜è®¤å€¼</th><th>æè¿°</th></tr>
<tr><td width="15%">deserializer</td><td width="10%">-</td><td>è¿™ä¸ªç±»çš„å…¨é™å®šæ€§ç±»åï¼š <code>org.apache.flume.sink.solr.morphline.BlobDeserializer$Builder</code></td></tr>
<tr><td width="15%">deserializer.maxBlobLength</td><td width="10%">100000000</td><td>ä¸€ä¸ªç»™å®šè¯·æ±‚è¯»å–å’Œç¼“å­˜çš„æœ€å¤§å­—èŠ‚æ•°</td></tr>
</table>

<p>&lt;/br&gt;</p>

<p>===</p>

<p><strong><em>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</em></strong></p>
:ET