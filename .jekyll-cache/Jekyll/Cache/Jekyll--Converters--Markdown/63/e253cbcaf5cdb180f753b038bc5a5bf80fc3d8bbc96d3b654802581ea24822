I"²<table>
  <thead>
    <tr>
      <th>Â </th>
      <th><strong>ç›® å½•</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td><a href="#intro">é‡åˆ°é—®é¢˜</a></td>
    </tr>
    <tr>
      <td>2</td>
      <td><a href="#names">å®˜æ–¹æ›´æ–°è¯´æ˜</a></td>
    </tr>
    <tr>
      <td>3</td>
      <td><a href="#reference">å‚è€ƒæ–‡çŒ®</a></td>
    </tr>
  </tbody>
</table>

<p>æœ€è¿‘åœ¨é¡¹ç›®ä¸­ç”¨åˆ°äº† jQuery.dataTablesï¼Œ è¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„ jQuery æ’ä»¶ï¼Œè°ƒç”¨æ–¹ä¾¿ï¼Œæ”¯æŒå›è°ƒå¯¹æ•°æ®è¿›è¡Œæ’åºã€æŸ¥è¯¢ã€åˆ†é¡µç­‰æ“ä½œï¼Œå¹¶ä¸” bootstrap æ¡†æ¶ä¹Ÿæœ‰å¯¹å…¶å°è£…ï¼Œçœäº†æˆ‘ä»¬ç•Œé¢è®¾è®¡çš„æ´»ã€‚dataTables è‡ªå¸¦äº†stringï¼Œdateï¼Œnumeric çš„æ’åºï¼Œä½†å½“é‡åˆ°æ¯”è¾ƒç‰¹æ®Šçš„æ’åºéœ€æ±‚æ—¶ï¼Œå°±å¾—å¦å¯»å‡ºè·¯äº†ã€‚</p>

<h2 id="ä¸€é‡åˆ°é—®é¢˜-">ä¸€ã€é‡åˆ°é—®é¢˜ <a name="intro"></a></h2>
<p>è¿™å‡ å¤©åšé¡¹ç›®æ—¶ï¼Œæ­£å¥½ç¢°åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œè¦å¯¹ä¸‹é¢çš„åˆ†ç§’çš„å½¢å¼è¿›è¡Œæ’åº</p>

<p><img src="\images\post\MM-SS.jpg" alt="mm-ss" /></p>

<p>è€Œ dataTables çš„è‡ªå¸¦æ’åºä¼šå°†è¿™ä¸€åˆ—è§†ä¸º string æ’åºã€‚ æ˜¾ç„¶æ˜¯ä¸æ»¡è¶³æˆ‘ä»¬éœ€æ±‚çš„ã€‚ä¸€å¼€å§‹ä»¥ä¸ºè¦å¤§åŠ¨å¹²æˆˆï¼Œåæ¥çœ‹äº†APIæ–‡æ¡£åå‘ç°ï¼ŒdataTables çš„ç¬¬ä¸‰æ–¹æ‰©å±•æ”¯æŒè¿˜æ˜¯å¾ˆçµæ´»çš„ã€‚</p>

<h2 id="äºŒè§£å†³æ–¹æ¡ˆ">äºŒã€è§£å†³æ–¹æ¡ˆ<a name="names"></a></h2>

<p>å®˜æ–¹æ–‡æ¡£ä¸­æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼š</p>

<p>(1) Type based column sorting ;</p>

<p>(2) Custom data source sorting</p>

<p>è¿˜æœ‰ä¸€ç§æ˜¯åœ¨æœåŠ¡ç«¯åœ¨æŸ¥æ•°æ®åº“æ—¶è¿›è¡Œæ’åºå¤„ç†</p>

<p>è¿™é‡Œæˆ‘ä¸»è¦ä½¿ç”¨ç¬¬ä¸€ç§å’Œç¬¬ä¸‰ç§</p>

<h3 id="ä¸€type-based-column-sorting">ï¼ˆä¸€ï¼‰Type based column sorting</h3>

<p><strong>ä¸»è¦æ€è·¯</strong>ï¼šä¸»è¦æ€è·¯å°±æ˜¯å°†å•å…ƒæ ¼å†…å®¹è½¬æˆå¯æ’åºçš„ int ç±»å‹</p>

<p>1.é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å« dataTables.sort.plungin.js ï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jQuery.extend(jQuery.fn.dataTableExt.oSort, {
	"MM-SS-pre": function (a) {
    	var x = String(a).replace(/&lt;[\s\S]*?&gt;/g, "");    //å»é™¤htmlæ ‡è®°
    	x = x.replace(/&amp;nbsp;/ig, "");                   //å»é™¤ç©ºæ ¼
   	    x = x.split('åˆ†')[0]*60 + x.split('åˆ†')[1].split('ç§’')[0]           
    	return x;
	},

    "MM-SS-asc": function (a, b) {                //æ­£åºæ’åºå¼•ç”¨æ–¹æ³•
        return ((a &lt; b) ? -1 : ((a &gt; b) ? 1 : 0));
    },

    "MM-SS-desc": function (a, b) {                //å€’åºæ’åºå¼•ç”¨æ–¹æ³•
        return ((a &lt; b) ? 1 : ((a &gt; b) ? -1 : 0));
    }
});
</code></pre></div></div>

<p>2.åœ¨å‰å°é¡µé¢ä¸­åŠ å…¥ä»¥ä¸‹çš„ js å¼•ç”¨</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script type="text/javascript" src="jquery.dataTables.js"&gt;&lt;/script&gt;
</code></pre></div></div>

<p>3.å‰å°JSé‡Œæ·»åŠ </p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"aoColumnDefs": [{ "sType": "html-percent", "aTargets": [8] }]
</code></pre></div></div>

<h3 id="äºŒåœ¨æœåŠ¡ç«¯æ·»åŠ æ’åº">(äºŒ)åœ¨æœåŠ¡ç«¯æ·»åŠ æ’åº</h3>

<p>å› ä¸ºè¡¨é‡Œæ•°æ®ä¸ºNumberæ ¼å¼ï¼Œå­˜çš„æ˜¯ç§’ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œæ’åº</p>

<p>ä»å‰ç«¯å¯ä»¥è·å¾—ä¸¤ä¸ªå‚æ•°</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var sortIdx = req.query.iSortCol_0 || -1;
var sortDir = req.query.sSortDir_0 || '';
</code></pre></div></div>

<p>è¿™ä¿©ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨æ‰€ç‚¹å‡»åˆ—çš„ç´¢å¼•å·å’Œè¯¥åˆ—æ˜¯å‡åºè¿˜æ˜¯é€†åº</p>

  	if (sortIdx !== -1 &amp;&amp; sortDir !== â€˜â€˜&amp;&amp; baseFieldNames !== undefined &amp;&amp;	baseFieldNames.length &gt;= sortIdx) {
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  	if (sortIdx === '0') {
    	sort = { 'departId-avg': -1 };
  	} else {
    	sortDir = sortDir === 'asc' ? 1 : -1;
    	sort[baseFieldNames[sortIdx]] = sortDir;
  	}
}
</code></pre></div></div>

<p>æ•´åˆçš„sortåœ¨æŸ¥è¡¨æ—¶æ·»åŠ å³å¯ã€‚</p>

<h2 id="å››å‚è€ƒæ–‡çŒ®">å››ã€å‚è€ƒæ–‡çŒ®<a name="reference"></a></h2>

<p><a href="https://datatables.net/plug-ins/sorting/#how_to_data_source">https://datatables.net/plug-ins/sorting/#how_to_data_source</a></p>
:ET