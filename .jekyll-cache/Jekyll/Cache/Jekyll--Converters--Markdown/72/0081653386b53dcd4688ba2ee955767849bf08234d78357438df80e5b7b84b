I"˜<h2 id="ä¸€é—®é¢˜åœºæ™¯">ä¸€ã€é—®é¢˜åœºæ™¯</h2>
<p>è‡ªåŠ¨åŒ–è§„åˆ™æµ‹è¯•ç¯å¢ƒï¼Œä½¿ç”¨python2ç¼–å†™ï¼Œä¾èµ–äºredis-py-clusterï¼Œpykafkaï¼Œfuturesï¼Œmysql-pythonã€‚åœ¨æœ¬åœ°æ­å»ºæµ‹è¯•ç¯å¢ƒï¼Œpythonå®‰è£…
æ²¡æœ‰å‡ºç°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å®‰è£…pythonæ’ä»¶æ—¶ï¼Œé‡åˆ°é—®é¢˜è¾ƒå¤šï¼Œè§£å†³èŠ±è´¹æ—¶é—´è¾ƒé•¿ï¼Œä¸”æœªèƒ½å®Œå…¨è§£å†³ï¼Œå¯¼è‡´æµ‹è¯•ç¯å¢ƒè¿Ÿè¿Ÿä¸èƒ½è¿è¡Œã€‚æ‰€ä»¥å†³å®šé‡‡ç”¨dockeræ¥
æ­å»ºæµ‹è¯•ç¯å¢ƒã€‚</p>

<h2 id="äºŒæ­å»ºæ­¥éª¤">äºŒã€æ­å»ºæ­¥éª¤</h2>
<p>ä»¥ä¸‹ä¸ºæ­å»ºç¯å¢ƒçš„æ­¥éª¤</p>

<ol>
  <li>å®‰è£…dockerç¯å¢ƒä¸æ</li>
  <li>åˆ›å»ºåŸºæœ¬pythonç¯å¢ƒï¼Œå¹¶å®‰è£…æ’ä»¶
    <ul>
      <li>åˆ›å»ºDockerfileæ–‡ä»¶</li>
      <li>åœ¨Dockerfileä¸­è¾“å…¥å¦‚ä¸‹ä»£ç 
```
FROM centos:7
MAINTAINER Augustus â€œqianwx@asiainfo.comâ€</li>
    </ul>
  </li>
</ol>

<p>RUN yum -y update
RUN yum -y install epel-release
RUN yum -y install python-pip
RUN yum -y install mysql-devel
RUN yum -y install python-devel
RUN yum -y install MySQL-python
RUN pip install â€“upgrade pip
RUN pip install pykafka
RUN pip install mysql
RUN pip install redis-py-cluster
RUN pip install futures</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* build åŸºæœ¬é•œåƒï¼Œæ‰§è¡Œå‘½ä»¤
</code></pre></div></div>
<p>docker build py_auto:v1 .</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3. åˆ›å»ºæ”¯æŒjavaå‘½ä»¤ç¯å¢ƒ
* åˆ›å»ºDockerfile
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir v2 &amp;&amp; cd v2 &amp;&amp;  vi Dockerfile ``` * ä»oracleä¸‹è½½linux-jdk8åˆ°å½“å‰ç›®å½• * åœ¨Dockerfileä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ ``` FROM py_auto_base:v2 MAINTAINER Augustus "qianwx@asiainfo.com"
</code></pre></div></div>

<p>ADD ./jdk-8u151-linux-x64.rpm /opt/
RUN rpm -ivh /opt/jdk-8u151-linux-x64.rpm
RUN rm -f /opt/jdk-8u151-linux-x64.rpm</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤
</code></pre></div></div>
<p>docker build py_auto:v2 .</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4. åˆ›å»ºæµ‹è¯•ç¯å¢ƒ
* åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºDockerfile
* åœ¨Dickerfileä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤
</code></pre></div></div>
<p>FROM py_auto_base:v2
MAINTAINER Augustus â€œqianwx@asiainfo.comâ€</p>

<p>RUN mkdir /py_auto
VOLUME [â€œ/py_autoâ€]</p>

<p>CMD [â€œ/bin/bashâ€]</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* è¿è¡Œå‘½ä»¤
</code></pre></div></div>
<p>docker build auto_test:v1 .</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
## ä¸‰ã€è¿è¡Œå¹¶æ‰§è¡Œæµ‹è¯•
 å¦‚æœä¸Šé¢ä¸€åˆ‡é¡ºåˆ©ï¼Œé‚£æˆ‘ä»¬è¿™è¾¹å·²ç»æˆåŠŸæ„å»ºäº†auto_test:v1é•œåƒã€‚ä¸‹é¢æˆ‘ä»¬æ¥å¯åŠ¨é•œåƒå¹¶è¿è¡Œæµ‹è¯•ç¯å¢ƒã€‚
 * å¯åŠ¨é•œåƒ
</code></pre></div></div>
<p>docker run -v /Users/augustus/asiawork/pytest/py-autotest-frame:/py_auto â€“name auto_test -d -it auto_test:v1</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> * è¿è¡Œæµ‹è¯•
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker exec auto_test python /py_auto/pyautotestframe/pyautotestframe.py -m sample-test  ```  è¿™æ ·æˆåŠŸè¿è¡Œäº†æµ‹è¯•å®ä¾‹ã€‚
</code></pre></div></div>

<h2 id="å››ä¸€ç‚¹å¿ƒå¾—">å››ã€ä¸€ç‚¹å¿ƒå¾—</h2>
<ol>
  <li>é‡‡ç”¨dockerï¼Œå¿«é€Ÿçš„æ­å»ºäº†æµ‹è¯•ç¯å¢ƒï¼Œåœ¨æ–°å¢äººå‘˜çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥èŠ‚çœä¸å°‘æ—¶é—´åœ¨ç¯å¢ƒæ­å»ºä¸Šã€‚å°±æ˜¯å¯¹äºå¼€å‘
è€…ä¹Ÿå¯ä»¥é¿å…å¾ˆå¤šæ­å»ºç¯å¢ƒçš„é—®é¢˜ã€‚</li>
  <li>æœ¬ç¤ºä¾‹é‡‡ç”¨çš„æ˜¯æ¯æ¬¡ä¸€æ‰§è¡Œï¼Œæ‰€ä»¥ä½¿ç”¨docker exec,åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œéœ€è¦å¯åŠ¨é•œåƒä¾¿è¿è¡Œç¯å¢ƒçš„æ—¶å€™ï¼Œå¯ä»¥
åœ¨Dockerfileä¸­ä½¿ç”¨ENTRTPOINTæ¥ä»¥ä½¿é•œåƒå¯åŠ¨ä¾¿è¿è¡Œã€‚</li>
</ol>

:ET