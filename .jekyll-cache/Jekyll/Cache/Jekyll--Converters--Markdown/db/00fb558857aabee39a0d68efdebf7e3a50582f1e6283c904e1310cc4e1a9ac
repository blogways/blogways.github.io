I"º!<p>å¯¹äº Java å¼€å‘çš„ web é¡¹ç›®ï¼ŒSpring æˆäº†å°ä¼™ä¼´ä»¬çš„é¦–é€‰ï¼Œå‡ ä¹æˆäº† JavaEE çš„æ ‡é…ï¼Œåœ¨å¼€å‘ã€æµ‹è¯•çš„è¿‡ç¨‹ä¸­å…ä¸äº†ä¼šç¢°åˆ°å¾ˆå¤šç›¸å…³çš„é”™è¯¯ï¼Œå…¶ä¸­æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªé”™è¯¯å°±æ˜¯  NoSuchBeanDefinitionExceptionï¼Œä¸‹é¢æ¥è®¨è®ºä¸€ä¸‹å¸¸è§çš„å‡ ç§æƒ…å†µï¼Œ æœ¬æ–‡ç€é‡ä»‹ç» bootstrap é¡¹ç›®æ³¨è§£å®ä¾‹åŒ– Beanï¼Œè‡³äº xml é…ç½®éƒ¨åˆ†é€»è¾‘æ€§æ¯”è¾ƒå¥½æŸ¥ï¼Œåº”è¯¥æ›´å®¹æ˜“å®šä½é—®é¢˜ï¼Œåœ¨è¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚</p>
<h3 id="1-æ¦‚è¿°">1. æ¦‚è¿°</h3>

<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºä¸€ä¸‹ Spring <code class="language-plaintext highlighter-rouge">BeanFactory</code> åœ¨è¯•å›¾åˆ›å»ºä¸€ä¸ªæœªåœ¨ Spring ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„ Bean æ—¶æŠ›å‡ºçš„å¸¸è§çš„å¼‚å¸¸ <code class="language-plaintext highlighter-rouge">org.springframework.beans.factory.NoSuchBeanDefinitionException</code>ã€‚</p>

<p>æˆ‘ä»¬å°†åœ¨è¿™é‡Œè®¨è®ºä¸‹å¯¼è‡´è¿™ä¸ªé—®é¢˜çš„å¯èƒ½çš„åŸå› ä»¥åŠå¯ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚</p>

<h3 id="2-cause-no-qualifying-bean-of-type--found-for-dependency">2. Cause: No qualifying bean of type [â€¦] found for dependency</h3>

<p>å¯¼è‡´è¿™ä¸ªå¼‚å¸¸çš„æœ€å¸¸è§çš„åŸå› æ˜¯ä¼å›¾æ³¨å…¥ä¸€ä¸ªæœªè¢«å®šä¹‰çš„ beanã€‚ä¾‹å¦‚ï¼åœ¨ BeanA ä¸­æ³¨å…¥ BeanBï¼š
	@Component
	public class BeanA {</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    @Autowired
    private BeanB dependency;
    ...
}
</code></pre></div></div>

<p>ä½†å¦‚æœ BeanB æ²¡æœ‰åœ¨ Spring çš„ä¸Šä¸‹æ–‡ä¸­å®šä¹‰ä¾èµ–å…³ç³»ï¼Œbootstrap è¿›ç¨‹ä¼šç»ˆæ­¢å¹¶æŠ›å‡º <code class="language-plaintext highlighter-rouge">NoSuchBeanDefinitionException</code> å¼‚å¸¸ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No qualifying bean of type [org.baeldung.packageB.BeanB] found for dependency: 
expected at least 1 bean which qualifies as autowire candidate for this dependency. 
Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
</code></pre></div></div>

<p>Spring å·²ç»æ˜ç¡®æŒ‡å‡ºï¼šâ€œè‡³å°‘éœ€è¦ä¸€ä¸ª bean ä½œä¸º autowire ä¾èµ–æ³¨å…¥â€</p>

<p>ä¸€ä¸ªåŸå›  BeanB å¯èƒ½ä¸åœ¨ä¸Šä¸‹æ–‡ä¸­ï¼Œéœ€è¦ bean åœ¨ classpath æ‰«ææ—¶è‡ªåŠ¨åŠ è½½ï¼Œå¹¶ä¸”è¢«æˆåŠŸæ³¨è§£ä¸ºå…¶ä¸­çš„ä¸€ä¸ª bean (@Component, @Repository, @Service, @Controller, etc)ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½ BeanB æ‰€åœ¨çš„åŒ…æ²¡æœ‰è¢« Spring æ‰«æåˆ°ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>package org.baeldung.packageB;
@Component
public class BeanB { ...}
While the classpath scanning may be configured as follows:

@Configuration
@ComponentScan("org.baeldung.packageA")
public class ContextWithJavaConfig {
    ...
}
</code></pre></div></div>

<p>å¦‚æœ bean æ‰€åœ¨çš„ç›®å½•æ²¡æœ‰é…ç½®æ‰«æï¼Œé‚£ä¹ˆ BeanB ä¹Ÿå°±ä¸ä¼šå®šä¹‰åœ¨å½“å‰çš„ Spring ä¸Šä¸‹æ–‡ä¸­ã€‚</p>

<h3 id="3-cause-no-qualifying-bean-of-type--is-defined">3. Cause: No qualifying bean of type [â€¦] is defined</h3>

<p>å¦å¤–ä¸€ç§æƒ…å†µå°±æ˜¯ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨é‡å¤çš„ bean å®šä¹‰ï¼Œä¸å”¯ä¸€ã€‚ä¾‹å¦‚ï¼Œå‡å¦‚æœ‰ä¸€ä¸ªæ¥å£ <code class="language-plaintext highlighter-rouge">IBeanB</code> è¢«ä¸¤ä¸ª bean (<code class="language-plaintext highlighter-rouge">BeanB1</code>å’Œ<code class="language-plaintext highlighter-rouge">BeanB2</code>) å®ç°ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Component
public class BeanB1 implements IBeanB {
    //
}
@Component
public class BeanB2 implements IBeanB {
    //
}
</code></pre></div></div>

<p>å½“ BeanA ä¾èµ–æ³¨å…¥è¿™ä¸ªæ¥å£æ—¶ï¼ŒSpring ä¸çŸ¥é“åˆ°åº•æ³¨å…¥å“ªä¸ªå®ç°ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Component
public class BeanA {

    @Autowired
    private IBeanB dependency;
    ...
}
</code></pre></div></div>

<p>ç»“æœæ˜¯ <code class="language-plaintext highlighter-rouge">BeanFactory</code> å†æ¬¡æŠ›å‡ºäº†å¼‚å¸¸ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Caused by: org.springframework.beans.factory.NoUniqueBeanDefinitionException: 
No qualifying bean of type [org.baeldung.packageB.IBeanB] is defined: 
expected single matching bean but found 2: beanB1,beanB2
Similarly, Spring clearly indicates the reason for the wiring failure: â€œexpected single matching bean but found 2â€³.
</code></pre></div></div>

<p>ä½†æ˜¯æ³¨æ„ï¼Œè¿™æ¬¡æŠ›å‡ºçš„å¼‚å¸¸ä¸æ˜¯ <code class="language-plaintext highlighter-rouge">NoSuchBeanDefinitionException</code>ï¼Œè€Œæ˜¯å®ƒçš„å­ç±» <code class="language-plaintext highlighter-rouge">NoUniqueBeanDefinitionException</code>ã€‚è¿™ä¸ªæ–°çš„å¼‚å¸¸åœ¨ Spring 3.2.1 æœ‰ä»‹ç»ï¼Œå…·ä½“çš„åŸå› å°±æ˜¯åœ¨ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨é‡å¤çš„ bean å®šä¹‰ã€‚</p>

<p>å¦‚æœä¸åšæŒ‡å®šï¼Œå°±ä¼šæŠ¥å¦‚ä¸‹çš„å¼‚å¸¸ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No qualifying bean of type [org.baeldung.packageB.IBeanB] is defined: 
expected single matching bean but found 2: beanB1,beanB2
One solution to this problem is to use the @Qualifier annotation to specify exactly the name of the bean we want to wire:
</code></pre></div></div>

<p>-</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Component
public class BeanA {

    @Autowired
    @Qualifier("beanB2")
    private IBeanB dependency;
    ...
}
</code></pre></div></div>

<p>é€šè¿‡æŒ‡å®š <code class="language-plaintext highlighter-rouge">Qualifier</code> å…·ä½“çš„æ³¨å…¥ beanï¼ŒSpring å°†èƒ½å†³å®šä½¿ç”¨å“ªä¸ªå®ç°ç±»æ¥æ³¨å…¥ã€‚</p>

<h3 id="4-cause-no-bean-named--is-defined">4. Cause: No Bean Named [â€¦] is defined</h3>

<p>å½“ Spring çš„ä¸Šä¸‹æ–‡ä¸­ä¸å­˜åœ¨æŒ‡å®šåç§°çš„ bean æ—¶åŒæ ·ä¼šæŠ›å‡º <code class="language-plaintext highlighter-rouge">NoSuchBeanDefinitionException</code> å¼‚å¸¸ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Component
public class BeanA implements InitializingBean {

    @Autowired
    private ApplicationContext context;

    @Override
    public void afterPropertiesSet() {
        context.getBean("someBeanName");
    }
}
</code></pre></div></div>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸å­˜åœ¨ <code class="language-plaintext highlighter-rouge">someBeanName</code> åç§°å®šä¹‰çš„ bean å°†ä¼šå¯¼è‡´ä¸‹é¢çš„å¼‚å¸¸ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No bean named 'someBeanName' is defined
Again, Spring clearly and concisely indicates the reason for the failure: â€œNo bean named X is definedâ€œ.
</code></pre></div></div>

<h3 id="5-cause-proxied-beans">5. Cause: Proxied Beans</h3>

<p>å½“ä¸Šä¸‹æ–‡ä¸­ä¸€ä¸ª bean ä½¿ç”¨ JDK çš„åŠ¨æ€ä»£ç†æœºåˆ¶ä»£ç†æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªä»£ç†ç±»ä¸éœ€è¦æ‰©å±•ç›®æ ‡ bean ï¼ˆç„¶è€Œå®ƒå°†å®ç°ç›¸åŒçš„æ¥å£ï¼‰</p>

<p>æ­£å› ä¸ºå¦‚æ­¤ï¼Œå¦‚æœä¸€ä¸ªæ¥å£è¢«æ³¨å…¥ï¼Œå®ƒå°†è¢«æ­£ç¡®æ¥å…¥ã€‚ç„¶è€Œå¦‚æœä¸€ä¸ª bean è¢«å®é™…ç±»æ³¨å…¥ï¼ŒSpring  å°†æ‰¾ä¸åˆ°åŒ¹é…çš„ç±»çš„ bean å®šä¹‰ï¼Œç”±äºä»£ç†ç±»å®é™…ä¸Šä¸æ‰©å±•è¯¥ç±»ã€‚</p>

<p>ä¸€ä¸ªå¾ˆå¸¸è§çš„ä»£ç†æ˜¯ Spring çš„äº‹åŠ¡æ”¯æŒï¼Œå³è¢« <code class="language-plaintext highlighter-rouge">@Transactional</code> æ³¨è§£çš„ beanã€‚</p>

<p>ä¾‹å¦‚ï¼Œå¦‚æœ ServiceA æ³¨å…¥ ServiceBï¼Œä¸¤ä¸ªæœåŠ¡éƒ½æœ‰äº‹åŠ¡ï¼Œé€šè¿‡ç±»å®šä¹‰æ³¨å…¥å°†æ— æ³•å·¥ä½œï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Service
@Transactional
public class ServiceA implements IServiceA{

    @Autowired
    private ServiceB serviceB;
    ...
}

@Service
@Transactional
public class ServiceB implements IServiceB{
    ...
}
</code></pre></div></div>

<p>åŒæ ·çš„ä¸¤ä¸ªæœåŠ¡ï¼Œè¿™æ¬¡é€šè¿‡æ¥å£æ³¨å…¥å°± OKï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Service
@Transactional
public class ServiceA implements IServiceA{

    @Autowired
    private IServiceB serviceB;
    ...
}

@Service
@Transactional
public class ServiceB implements IServiceB{
    ...
}
</code></pre></div></div>

<h3 id="6-ç»“è®º">6. ç»“è®º</h3>

<p>æœ¬æ–‡è®¨è®ºäº†å‡ ç§å¯èƒ½å¯¼è‡´ <code class="language-plaintext highlighter-rouge">NoSuchBeanDefinitionException</code> çš„æƒ…å†µï¼Œé‡ç‚¹æ˜¯å¦‚ä½•åœ¨å®è·µä¸­è§£å†³è¿™äº›å¼‚å¸¸ã€‚</p>
:ET