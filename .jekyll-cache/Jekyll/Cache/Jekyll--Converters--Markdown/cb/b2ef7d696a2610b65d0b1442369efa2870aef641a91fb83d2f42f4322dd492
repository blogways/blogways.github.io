I"<p>Lua是一个非常有名的脚本语言，是使用标准C编写而成的，目前官方提供了其在众多平台下的编译的<code class="language-plaintext highlighter-rouge">Makefile</code>文件，非常强大！</p>

<p>支持编译的平台有<code class="language-plaintext highlighter-rouge">aix ansi bsd freebsd generic linux macosx mingw posix solaris</code></p>

<p>我在AIX下小试了一下，非常顺利地就编译通过了。</p>

<p>不过默认编译出来的是32位的，其库文件不能被64位的程序调用，需要修改一下其<code class="language-plaintext highlighter-rouge">Makefile</code>文件，就可以编译出64位版本。</p>

<p>修改<code class="language-plaintext highlighter-rouge">Makefile</code>需要考虑其原有的结构，不影响其他平台下的命令的执行。</p>

<p>故此，编辑<code class="language-plaintext highlighter-rouge">Makefile</code>：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd lua-5.2.2/src
vi Makefile
</code></pre></div></div>

<p>修改其中<code class="language-plaintext highlighter-rouge">aix</code>小节如下：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aix:
    $(MAKE) $(ALL) CC="xlc -q64" AR="ar -X64 rcu" CFLAGS="-O2 -DLUA_USE_POSIX -DLUA_USE_DLOPEN" SYSLIBS="-ldl" SYSLDFLAGS="-brtl -bexpall"
</code></pre></div></div>

<p>编译出来的目标文件就是64位的了！</p>

<p>后面我们会介绍如何在<a href="../../07/18/hp-ux-lua-64.html"><code class="language-plaintext highlighter-rouge">hp-ux</code></a>环境下编译Lua源码。</p>

:ET