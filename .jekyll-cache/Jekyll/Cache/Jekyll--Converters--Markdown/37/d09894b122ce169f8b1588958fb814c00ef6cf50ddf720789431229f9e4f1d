I"Ÿ0<div class="code fl">
    <dl>
    <dt>ç›®å½•</dt>
    <dd>
    <ol>
        <li><a href="#1">Suiteæµ‹è¯•</a></li>
        <li><a href="#2">Parameterizedæµ‹è¯•</a></li>
        <li><a href="#3">Categoriesæµ‹è¯•</a></li>
        <li><a href="#4">Theoriesæµ‹è¯•</a></li>
        <li><a href="#5">ç¬¬ä¸‰æ–¹çš„Runner</a></li>
        <li><a href="#6">å°ç»“</a></li>
    </ol>
    </dd>
    </dl>
</div>

<p>åœ¨<a href="junit-usage-1.html">è¿›é˜¶ä¸€</a>ï¼Œæˆ‘ä»¬ä»‹ç»äº†é»˜è®¤çš„JUnit4é»˜è®¤çš„è¿è¡Œå™¨æ˜¯<code class="language-plaintext highlighter-rouge">JUnit4</code>ã€‚æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†ç»§ç»­å‘å¤§å®¶ä»‹ç»JUnit4æ¡†æ¶æä¾›çš„å¦å¤–å‡ ä¸ªéå¸¸å®ç”¨çš„è¿è¡Œå™¨(Runner)ï¼š<code class="language-plaintext highlighter-rouge">Suite</code>ã€<code class="language-plaintext highlighter-rouge">Parameterized</code>ã€<code class="language-plaintext highlighter-rouge">Categories</code>ã€<code class="language-plaintext highlighter-rouge">Enclosed</code>å’Œ<code class="language-plaintext highlighter-rouge">Theories</code>ã€‚</p>

<p>åœ¨æµ‹è¯•ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ³¨é‡Š<code class="language-plaintext highlighter-rouge">@RunWith</code>æ¥æŒ‡å®šè¿™äº›è¿è¡Œå™¨ï¼Œæ¯”å¦‚:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@RunWith(Parameterized.class)
public class MyTest { â€¦
</code></pre></div></div>

<p>å¥½å§ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸€ä»‹ç»å§ï¼</p>

<h3 id="ä¸€suiteæµ‹è¯•"><a name="1"></a>ä¸€ã€Suiteæµ‹è¯•</h3>

<p>è¿›è¡Œ<code class="language-plaintext highlighter-rouge">Suite</code>æµ‹è¯•å¯ä»¥å°†å¤šä¸ªå¾…æµ‹è¯•çš„ç±»ï¼Œæ‰“åŒ…(Suite)ä¸€èµ·æµ‹è¯•ã€‚åœ¨å…¥å£æµ‹è¯•ç±»ä¸ŠåŠ ä¸¤ä¸ªæ³¨é‡Š:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@RunWith(Suite.class)
@SuiteClasses(TestClass1.class, ...)
</code></pre></div></div>

<p>å½“ä½ è¿è¡Œè¿™ä¸ªå…¥å£æµ‹è¯•ç±»ï¼Œæ¡†æ¶å°±ä¼šæŠŠæ‰“åŒ…åœ¨ä¸€èµ·çš„æ‰€æœ‰å¾…æµ‹è¯•ç±»éƒ½æµ‹è¯•ä¸€éã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import org.junit.runner.RunWith;
import org.junit.runners.Suite;

@RunWith(Suite.class)
@Suite.SuiteClasses({
  		TestFeatureLogin.class,
	TestFeatureLogout.class,
  		TestFeatureNavigate.class,
  		TestFeatureUpdate.class
})

public class FeatureTestSuite {
  // the class remains empty,
  // used only as a holder for the above annotations
}
</code></pre></div></div>

<p>æ¡†æ¶è¿è¡Œé‚£äº›å¾…æµ‹è¯•çš„ç±»ï¼Œæ˜¯æŒ‰ä»–ä»¬åœ¨<code class="language-plaintext highlighter-rouge">@Suite.SuiteClasses</code>ä¸­ç½—åˆ—çš„é¡ºåºå¼€å§‹æµ‹è¯•ã€‚</p>

<h3 id="äºŒparameterizedæµ‹è¯•"><a name="2"></a>äºŒã€Parameterizedæµ‹è¯•</h3>

<p>å¾ˆå¤šæ—¶å€™ï¼Œéœ€è¦ç”¨å¾ˆå¤šæµ‹è¯•æ•°æ®è¿›è¡Œå¤šæ¬¡æµ‹è¯•ã€‚æ€ä¹ˆåŠï¼Ÿé€šè¿‡å¤åˆ¶ç²˜è´´ä»£ç æ¥å®ç°ï¼Ÿç´¯â€¦</p>

<p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒJUnit4æ¡†æ¶æä¾›<code class="language-plaintext highlighter-rouge">Parameterized</code>æµ‹è¯•å™¨(<code class="language-plaintext highlighter-rouge">Runner</code>)æ¥å®ç°è¿™ç§éœ€æ±‚ã€‚</p>

<p>çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>package mytest;

import static org.junit.Assert.*;

import java.util.Arrays;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

@RunWith(Parameterized.class)
public class FibonacciTest {
    @Parameters
    public static Iterable&lt;Object[]&gt; data() {
        return Arrays.asList(new Object[][] { { 0, 0 }, { 1, 1 }, { 2, 1 },
                { 3, 2 }, { 4, 3 }, { 5, 5 }, { 6, 8 } });
    }

    private int fInput;

    private int fExpected;

    public FibonacciTest(int input, int expected) {
        fInput= input;
        fExpected= expected;
    }
    @Test
    public void test() {
        assertEquals(fExpected, Fibonacci.compute(fInput));
    }
}
</code></pre></div></div>

<p>å¾ˆç®€å•ï¼Œå¾ˆæ–¹ä¾¿æ˜¯å§ï¼</p>

<ol>
  <li>ç”¨<code class="language-plaintext highlighter-rouge">@Parameters</code>æ¥æ ‡è®°ï¼Œæˆ‘ä»¬ä¸ºæµ‹è¯•å‡†å¤‡çš„æ•°æ®</li>
  <li>å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ„é€ å‡½æ•°çš„å‚æ•°é¡ºåºå’Œå‡†å¤‡æ•°æ®çš„é¡ºåºä¸€è‡´</li>
  <li>å†™ä½ éœ€è¦çš„æµ‹è¯•æ–¹æ³•ï¼Œç”¨<code class="language-plaintext highlighter-rouge">@Test</code>æ³¨é‡Š</li>
  <li>è¿è¡Œèµ·æ¥ï¼Œæ¯ä¸ªæ•°æ®éƒ½ä¼šæµ‹è¯•ä¸€é</li>
</ol>

<p>å¦‚æœï¼Œä½ ä¸ä¹ æƒ¯å»å†™é‚£æ ·ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@RunWith(Parameterized.class)
public class FibonacciTest {
    @Parameters
    public static Iterable&lt;Object[]&gt; data() {
        return Arrays.asList(new Object[][] { { 0, 0 }, { 1, 1 }, { 2, 2 },
                { 3, 2 }, { 4, 3 }, { 5, 5 }, { 6, 8 } });
    }

    @Parameter(0)
    public int fInput;

    @Parameter(1)
    public int fExpected;

    @Test
    public void test() {
        assertEquals(fExpected, Fibonacci.compute(fInput));
    }
}
</code></pre></div></div>

<p>è¿è¡Œèµ·æ¥æ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼</p>

<p>å¯èƒ½ï¼Œä½ æ˜¯ä¸€ä¸ªå®Œç¾ä¸»ä¹‰è€…ï¼Œå¯¹è¿è¡ŒåæŠ¥é”™ä¿¡æ¯ä¸æ˜¯å¾ˆæ»¡æ„ï¼Œç°åœ¨æŠ¥é”™æ—¶åé¦ˆçš„ä¿¡æ¯å¯èƒ½æ˜¯è¿™æ ·ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test[3](mytest.FibonacciTest): expected:&lt;2&gt; but was:&lt;0&gt;
</code></pre></div></div>

<p>ä½ æƒ³æŠ¥é”™æ—¶æ˜¾ç¤ºæµ‹è¯•çš„è¾“å…¥æ•°æ®ï¼Œå¸Œæœ›æŠ¥é”™ç±»ä¼¼å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test[the 3 test, input:3,2](mytest.FibonacciTest): expected:&lt;2&gt; but was:&lt;0&gt;
</code></pre></div></div>

<p>è¦å®ç°è¿™ç‚¹å¾ˆç®€å•ï¼Œç»™<code class="language-plaintext highlighter-rouge">@Parameters</code>åŠ ä¸ªå‚æ•°<code class="language-plaintext highlighter-rouge">name</code>ï¼Œæ•´ä¸ªä»£ç å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>package mytest;

import static org.junit.Assert.*;

import java.util.Arrays;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

@RunWith(Parameterized.class)
public class FibonacciTest {
    @Parameters(name="the {index} test, input:{0},{1}")
    public static Iterable&lt;Object[]&gt; data() {
        return Arrays.asList(new Object[][] { { 0, 0 }, { 1, 1 }, { 2, 1 },
                { 3, 2 }, { 4, 3 }, { 5, 5 }, { 6, 8 } });
    }

    private int fInput;

    private int fExpected;

    public FibonacciTest(int input, int expected) {
        fInput= input;
        fExpected= expected;
    }
    @Test
    public void test() {
        assertEquals(fExpected, Fibonacci.compute(fInput));
    }
}
</code></pre></div></div>

<p>åœ¨è¿™é‡Œéœ€è¦ç¨å¾®è§£é‡Šä¸€ä¸‹<code class="language-plaintext highlighter-rouge">name</code>ä¸­çš„å‡ ä¸ªå‚æ•°çš„å«ä¹‰ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{index} è¡¨ç¤ºåºå·ï¼Œæµ‹è¯•æ•°æ®åœ¨æ•´ä¸ªæ•°æ®åˆ—è¡¨ä¸­çš„åºå·
{0} è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°
{1} è¡¨ç¤ºç¬¬äºŒä¸ªå‚æ•°
...
{n} è¡¨ç¤ºç¬¬n+1ä¸ªå‚æ•°
</code></pre></div></div>

<h3 id="ä¸‰categoriesæµ‹è¯•"><a name="3"></a>ä¸‰ã€Categoriesæµ‹è¯•</h3>

<p>ä¸€ä¸ªæµ‹è¯•ç±»é‡Œé¢åŒ…å«å¾ˆå¤šå¾…æµ‹è¯•çš„æ–¹æ³•ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™äº›å¾…æµ‹è¯•çš„æ–¹æ³•åˆ†ç±»ï¼ŒæŸäº›æ—¶å€™æµ‹è¯•æŸç±»æ–¹æ³•ï¼Œé‚£ä¹ˆéœ€è¦æ€ä¹ˆåšå‘¢ï¼Ÿ</p>

<p>çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public interface FastTests { /* category marker */ }
public interface SlowTests { /* category marker */ }

public class A {
  @Test
  public void a() {
    fail();
  }

  @Category(SlowTests.class)
  @Test
  public void b() {
  }
}

@Category({SlowTests.class, FastTests.class})
public class B {
  @Test
  public void c() {

  }
}

@RunWith(Categories.class)
@IncludeCategory(SlowTests.class)
@SuiteClasses( { A.class, B.class }) // Note that Categories is a kind of Suite
public class SlowTestSuite {
  // Will run A.b and B.c, but not A.a
}
</code></pre></div></div>

<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå°†ä¼šæµ‹è¯•<code class="language-plaintext highlighter-rouge">A.b</code>å’Œ<code class="language-plaintext highlighter-rouge">B.c</code>ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸ä¼šæµ‹è¯•<code class="language-plaintext highlighter-rouge">A.a</code>ã€‚</p>

<p>å†çœ‹ä¸‹é¢ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@RunWith(Categories.class)
@IncludeCategory(SlowTests.class)
@ExcludeCategory(FastTests.class)
@SuiteClasses( { A.class, B.class }) // Note that Categories is a kind of Suite
public class SlowTestSuite {
  // Will run A.b, but not A.a or B.c
}
</code></pre></div></div>

<p>è¿™æ¬¡ï¼Œåªä¼šè¿è¡Œ<code class="language-plaintext highlighter-rouge">A.b</code>ï¼Œè€Œä¸ä¼šè¿è¡Œ<code class="language-plaintext highlighter-rouge">A.a</code>å’Œ<code class="language-plaintext highlighter-rouge">B.c</code>ã€‚</p>

<h3 id="å››theoriesæµ‹è¯•"><a name="4"></a>å››ã€Theoriesæµ‹è¯•</h3>

<p>ç»“åˆå‰é¢<a href="junit-usage-3.html">è¿›é˜¶ä¸‰</a>ä¸­ä»‹ç»çš„å‡è®¾(assumeThat)ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å¤§é‡çš„æµ‹è¯•æ•°æ®åšä¸€äº›ç†è®ºæµ‹è¯•ã€‚</p>

<p>å…ˆçœ‹ä¾‹å­ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@RunWith(Theories.class)
public class UserTest {
    @DataPoint
    public static String GOOD_USERNAME = "optimus";
    @DataPoint
    public static String USERNAME_WITH_SLASH = "optimus/prime";

    @Theory
    public void filenameIncludesUsername(String username) {
        assumeThat(username, not(containsString("/")));
        assertThat(new User(username).configFileName(), containsString(username));
    }
}
</code></pre></div></div>

<p>æ˜¯ä¸æ˜¯çœ‹å¾—æœ‰ç‚¹è‹¦æ¶©éš¾æ‡‚ï¼Œæ²¡å…³ç³»ï¼Œæˆ‘æ¥ç»™ä½ ä¸€ä¸€è®²è§£ï¼š</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">@RunWith(Theories.class)</code> æ˜¯å‘Šè¯‰æ¡†æ¶ï¼Œä¸‹é¢çš„æµ‹è¯•ç±»å°†è¦åšç†è®ºæµ‹è¯•ï¼›</li>
  <li><code class="language-plaintext highlighter-rouge">@DataPoint</code> å‘Šè¯‰æ¡†æ¶ï¼Œæ ‡æ³¨çš„è¿™äº›æ•°æ®éƒ½æ˜¯å‡†å¤‡ç”¨æ¥æµ‹è¯•çš„æ•°æ®ï¼›</li>
  <li><code class="language-plaintext highlighter-rouge">@Theory</code>æ ‡æ³¨çš„æ–¹æ³•ï¼Œæ˜¯éœ€è¦è¿›è¡Œç†è®ºæµ‹è¯•çš„æ–¹æ³•ï¼›</li>
  <li><code class="language-plaintext highlighter-rouge">assumeThat</code> æ˜¯å¯¹å¾…æµ‹è¯•çš„æ•°æ®(<code class="language-plaintext highlighter-rouge">@DataPoint</code>æ ‡æ³¨çš„æ•°æ®)è¿›è¡Œæ£€æŸ¥ï¼Œç¬¦åˆçš„æ•°æ®ç»§ç»­å¾€ä¸‹èµ°ï¼Œä¸ç¬¦åˆçš„æ•°æ®å¿½ç•¥æ‰.å¦‚æœï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½ä¸ç¬¦åˆï¼Œé‚£ä¹ˆ<code class="language-plaintext highlighter-rouge">@Theory</code>æ ‡æ³¨çš„æµ‹è¯•ï¼Œåˆ™ç®—å¤±è´¥(fail)ã€‚</li>
</ol>

<p>å…³äºç†è®ºæµ‹è¯•ï¼Œä¹Ÿå¯ä»¥æ‰©å±•æ›´å¤šçš„åŠŸèƒ½ï¼Œç½‘ä¸Šå·²ç»æœ‰äººåšäº†ä¸€äº›æ‰©å±•ï¼Œæ¯”å¦‚<a href="http://web.archive.org/web/20071012143326/popper.tigris.org/tutorial.html">è¿™é‡Œ</a>.</p>

<h3 id="äº”ç¬¬ä¸‰æ–¹çš„runner"><a name="5"></a>äº”ã€ç¬¬ä¸‰æ–¹çš„Runner</h3>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">@RunWith</code>æ¥æ ‡æ³¨ä¸€äº›ç¬¬ä¸‰æ–¹çš„Runnerï¼Œæ¯”å¦‚ï¼š</p>

<ol>
  <li>
    <p>SpringJUnit4ClassRunner</p>

    <ul>
      <li><a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/test/context/junit4/SpringJUnit4ClassRunner.html">http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/test/context/junit4/SpringJUnit4ClassRunner.html</a></li>
    </ul>
  </li>
  <li>
    <p>MockitoJUnitRunner</p>
    <ul>
      <li><a href="http://docs.mockito.googlecode.com/hg/latest/org/mockito/runners/MockitoJUnitRunner.html">http://docs.mockito.googlecode.com/hg/latest/org/mockito/runners/MockitoJUnitRunner.html</a></li>
    </ul>
  </li>
</ol>

<h3 id="å…­å°ç»“"><a name="6"></a>å…­ã€å°ç»“</h3>

<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ï¼Œæœ¬æ–‡ä»‹ç»äº†JUnit4é‡Œé¢å†…ç½®çš„å‡ ä¸ªç‰¹è‰²è¿è¡Œå™¨ï¼ˆRunnerï¼‰ï¼ŒåŒ…æ‹¬ï¼šå°†å¤šä¸ªæµ‹è¯•ç±»æ‰“åŒ…ä¸€èµ·æµ‹è¯•çš„Suiteã€å¯ä»¥å®ç°å‚æ•°åŒ–æµ‹è¯•çš„Parameterizedã€å¯ä»¥å®ç°åˆ†ç±»æµ‹è¯•çš„Categoriesã€å¯ä»¥å®ç°ç†è®ºæµ‹è¯•çš„Theoriesï¼Œè¿˜æœ‰ç½‘ç»œä¸Šçš„ä¸€äº›ç¬¬ä¸‰æ–¹Runnerã€‚</p>

<p>æ ¹æ®å®é™…æƒ…å†µçš„éœ€è¦ï¼Œåˆç†çš„åˆ©ç”¨è¿™äº›Runnerï¼Œå¯ä»¥è¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p>
:ET