<!DOCTYPE html>
<html lang='zh-CN'>
<head>
    <title>Redis Linux 数据类型_博汇网_www.blogways.net</title>
    <meta name=keywords content="Redis, Linux, Type">
    
    <meta name=description content="Redis 的5种不同的数据类型： 字符串(String), 哈希(Map), 列表(list), 集合(sets) 和 有序集合(sorted sets)。">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="http://cdn.bootcss.com/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src='/js/jquery-2.1.1.js'></script>
    <link rel='stylesheet' type='text/css' href='/bootstrap/css/bootstrap.css'>
    <link rel='stylesheet' type='text/css' href='/bootstrap/css/bootstrap-theme.css'>
    <link rel='stylesheet' type='text/css' href='/css/app.css'>
    <script src='/bootstrap/js/bootstrap.js'></script>
    <script src='/js/app.js'></script>
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?ac29e786ae4e5463b445f1e0ad1f1d1e";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<body style='background-color: #f5f5f5;'>
    <div class='totop visible-lg visible-md visible-sm hidden-xs'>
        <a id='to-top' href='javascript:void(0)'>
            <span id='to-top-title'>返回</br>顶部</span>
        </a>
    </div>
    <div class='totop-xs hidden-lg hidden-md hidden-sm visible-xs'>
        <a id='to-top-xs' href='javascript:void(0)'>
            <span id='to-top-title-xs'>返回</br>顶部</span>
        </a>
    </div>
    <div class='headerbar'>
            <div class='navbar navbar-default navbar-fixed-top' role='navigation'>
        <div class='containr-fluid'>
            <div class='navbar-header'>
                <button type='button' class='navbar-toggle collapsed' data-toggle='collapse' data-target='#bw-navbar-collapse'>
                    <span class='sr-only'>下拉框</span>
                    <span class='icon-bar'></span>
                    <span class='icon-bar'></span>
                    <span class='icon-bar'></span>
                </button>
                <a class='navbar-brand' href='/'>Blog<span>ways</span></a>
            </div>
            <div class='navbar-collapse collapse' id='bw-navbar-collapse'>
                <ul class='nav navbar-nav'>
                    <li><a href='/'>主页</a></li>
                    <li class='divider visible-xs'></li>
                    
                    <li class='dropdown visible-sm visible-xs active'>
                        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>热门分类
                            <span class='caret'></span>
                        </a>
                        <ul class='dropdown-menu cate-drop-menu' role='menu'>
                            
                            <li>
                                <a href='/categories/Jekyll/'>Jekyll
                                    <span class='badge pull-right'>4</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/杂记/'>杂记
                                    <span class='badge pull-right'>28</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/JUnit/'>JUnit
                                    <span class='badge pull-right'>8</span>
                                </a>
                            </li>
                            
                            <li class='disabled active'>
                                <a href='javascript:void(0)'>NoSQL
                                    <span class='badge pull-right'>11</span>
                                </a>
                                </li>
                            
                            <li>
                                <a href='/categories/Sencha/'>Sencha
                                    <span class='badge pull-right'>5</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/Nginx/'>Nginx
                                    <span class='badge pull-right'>4</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/Apache/'>Apache
                                    <span class='badge pull-right'>10</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/Node.js/'>Node.js
                                    <span class='badge pull-right'>7</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/Express/'>Express
                                    <span class='badge pull-right'>14</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/jQuery/'>jQuery
                                    <span class='badge pull-right'>21</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/Java/'>Java
                                    <span class='badge pull-right'>8</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/Solr/'>Solr
                                    <span class='badge pull-right'>6</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/WordPress/'>WordPress
                                    <span class='badge pull-right'>3</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/drupal/'>drupal
                                    <span class='badge pull-right'>2</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/joomla/'>joomla
                                    <span class='badge pull-right'>1</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/design/'>design
                                    <span class='badge pull-right'>5</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/Web前端/'>Web前端
                                    <span class='badge pull-right'>1</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/keepalived/'>keepalived
                                    <span class='badge pull-right'>1</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/iot/'>iot
                                    <span class='badge pull-right'>1</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/web前端/'>web前端
                                    <span class='badge pull-right'>15</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/交互设计/'>交互设计
                                    <span class='badge pull-right'>6</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/Spring/'>Spring
                                    <span class='badge pull-right'>1</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/web后端/'>web后端
                                    <span class='badge pull-right'>1</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/git/'>git
                                    <span class='badge pull-right'>1</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/索引/'>索引
                                    <span class='badge pull-right'>1</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/storm/'>storm
                                    <span class='badge pull-right'>2</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/Python/'>Python
                                    <span class='badge pull-right'>2</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href='/categories/nodejs/'>nodejs
                                    <span class='badge pull-right'>1</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class='dropdown'>
                        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>关于我们
                            <span class='caret'></span>
                        </a>
                        <ul class='dropdown-menu' role='menu'>
                            <li><a href='/about.html'>所有信息</a></li>
                            <li class='divider'></li>
                            <li><a href='/authors/chenfan/'>陈凡</a></li>
                            <li><a href='/authors/chenwt/'>陈文婷</a></li>
                            <li><a href='/authors/fukui/'>付奎</a></li>
                            <li><a href='/authors/huangmai/'>黄劢</a></li>
                            <li><a href='/authors/huqinghai/'>胡青海</a></li>
                            <li><a href='/authors/jacky/'>Jacky</a></li>
                            <li><a href='/authors/jyjsjd/'>景阳</a></li>
                            <li><a href='/authors/liuyiwei/'>刘益伟</a></li>
                            <li><a href='/authors/tangshizhong/'>汤仕忠</a></li>
                            <li><a href='/authors/tangzhi/'>唐治</a></li>
                            <li><a href='/authors/wangdong/'>王栋</a></li>
                            <li><a href='/authors/wanghui/'>汪回</a></li>
                            <li><a href='/authors/xuwannian/'>徐万年</a></li>
                            <li><a href='/authors/wanzhou/'>万洲</a></li>
                            <li><a href='/authors/zhangke/'>张可</a></li>
                            <li><a href='/authors/zhangshaoyong/'>张少勇</a></li>
                            <li><a href='/authors/zhaojiajun/'>赵家君</a></li>
                        </ul>
                    </li>
                    <li><a href='https://github.com/blogways/blogways.github.io' title='https://github.com/blogways/blogways.github.io' target='_blank'>联系我们</a></li>
                </ul>
                <!--<form class="navbar-form navbar-right hidden-sm hidden-xs" role="search">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search">
                            <button type="submit" class="btn btn-default">Submit</button>
                    </div>
                </form>-->
                <p class="navbar-text navbar-right hidden-sm hidden-xs"><small>汇集优秀博文(关注:敏捷开发/WEB开发/移动终端开发/NOSQL/云计算...)尽在</small><a href="/" class="navbar-link">Blogways</a>!</p>
            </div>
        </div>    
    </div>

    </div>
        <script>
        $(document).ready(function(){
            (function(){
                $.getJSON("/authors.json",function(mJSON){
                    $.each( mJSON , function( i , item ){
                        var name = item.name.toLowerCase().replace(" ","") || "";
                        var page_name = "Jacky".toLowerCase().replace(" ","");
                        var num = item.articles.length || 0;
                        if(name == page_name){
                            $("#pt-article-num").append( num + " 篇博文" );
                        }
                    });
                });
            })();
        });
    </script>

    <div class='container'>
        <div class='row main-content'>
            <div class='col-md-9 col-sm-12 col-xs-12 mainbar'>
                <div class='pt-article'>
                    <div class='panel panel-default pt-article-extra'>
                        <div class='panel-body'>
                            <div class='pt-article-pn row'>
                                
                                <div class='col-lg-6 col-md-6 col-sm-12 col-xs-12'>
                                    <span>上一篇:
                                        <a href='/blog/2013/05/05/redis-usage-2.html' title='Redis Linux Pipeline && 分布式'>Redis Linux Pipeline && 分布式</a>
                                    </span>
                                </div>
                                
                                
                                <div class='col-lg-6 col-md-6 col-sm-12 col-xs-12'>
                                    <span class='pull-right hidden-sm hiden-xs visible-lg visible-md'>下一篇:
                                        <a href='/blog/2013/05/13/maven-multi-modules-demo.html' title='在Eclipse中创建Maven多模块工程的例子[20150428更新]'>在Eclipse中创建Maven多模块工程的例子[20150428更新]</a>
                                    </span>
                                    <span class='hidden-lg hiden-md visible-sm visible-xs'>下一篇:
                                        <a href='/blog/2013/05/13/maven-multi-modules-demo.html' title='在Eclipse中创建Maven多模块工程的例子[20150428更新]'>在Eclipse中创建Maven多模块工程的例子[20150428更新]</a>
                                    </span>
                                </div>
                                
                            </div><!--end of article-pn-->
                            <hr class='hidden-sm hidden-xs'>
                            <div class='pt-article-info'>
                                <div class='pt-article-title'>
                                    <h2>Redis Linux 数据类型
                                        <small class='pt-article-date hidden-xs'>
                                            <span class='glyphicon glyphicon-calendar'></span>&nbsp;
                                            <span class='sr-only'>发布于&nbsp;:&nbsp;</span>2013-05-05
                                        </small>
                                    </h2>
                                </div>
                                <div class='row pt-article-tags'>
                                    <div class='col-xs-12 post-tags'>
                                        <span class='glyphicon glyphicon-tags'></span>&nbsp;
                                        
                                        <a class='label label-info' href='#'>Redis</a>
                                        
                                        、
                                        
                                        <a class='label label-info' href='#'>Linux</a>
                                        
                                        、
                                        
                                        <a class='label label-info' href='#'>Type</a>
                                        
                                        
                                    </div>
                                </div>
                                <div class='pt-article-tags'>
                                    分类: <a class='label label-info' href='/categories//'>NoSQL</a>
                                </div>
                                <div class='pt-article-tags'>
                                    <!-- Baidu Button BEGIN -->
<div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare">
<a class="bds_qzone"></a>
<a class="bds_tsina"></a>
<a class="bds_tqq"></a>
<a class="bds_renren"></a>
<a class="bds_t163"></a>
<span class="bds_more"></span>
<a class="shareCount"></a>
</div>
<script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=59150" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
</script>
<!-- Baidu Button END -->

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class='pt-article-main'>
                        <div class='panel panel-default'>
                            <div class='panel-body'>
                                <div class='pt-article-content'>
                                    <h2 id="数据类型">数据类型</h2>
<h3 id="keys">keys</h3>
<p>redis本质上还是一个key-value db，所以我们首先来看看他的key。</p>

<p>相关命令</p>

<div class="highlighter-rouge"><pre class="highlight"><code>exists key 测试指定的 key 是否存在，真1｜假0
del key1 key2 ... keyn 返回删除的 key 的数目，0表示不存在
type key 返回 key 的 value 类型
keys pattern 返回匹配指定模式的所有 key
randomkey 随机返回一个 key
rename oldkey newkey 重命名一个 key，如果 newkey 存在会被覆盖
renamenx oldkey newkey 同上，如果 newkey 存在返回失败
dbsize 返回当前数据库的 key 数量
expire key seconds 为 key 指定过期时间，单位是秒
ttl key 返回设置过期时间的 key 的剩余过期时间
select db-index 通过索引选择数据库，默认连接的是数据库0，默认数据库数是16个
move key db-index 将 key 从当前数据库移动到指定数据库
flushdb 删除当前数据库里面所有的 key
flushall 删除所有数据库中所有的 key
</code></pre>
</div>

<p>示例</p>

<div class="highlighter-rouge"><pre class="highlight"><code>redis 127.0.0.1:6479&gt; set test 1
OK
redis 127.0.0.1:6479&gt; set tast 2
OK
redis 127.0.0.1:6479&gt; set tist 3
OK
redis 127.0.0.1:6479&gt; exists test
(integer) 1
redis 127.0.0.1:6479&gt; del tist
(integer) 1
redis 127.0.0.1:6479&gt; type test
string
redis 127.0.0.1:6479&gt; keys *
1) "tast"
2) "test"
3) "tist"
redis 127.0.0.1:6479&gt; keys t*
1) "tast"
2) "test"
3) "tist"
redis 127.0.0.1:6479&gt; keys t[ia]st
1) "tast"
2) "tist"
redis 127.0.0.1:6479&gt; keys t?st
1) "tast"
2) "test"
3) "tist"
redis 127.0.0.1:6479&gt; randomkey
"test"
redis 127.0.0.1:6479&gt; rename test tt
OK
redis 127.0.0.1:6479&gt; dbsize
(integer) 2
redis 127.0.0.1:6479&gt; expire tt 30
(integer) 1
redis 127.0.0.1:6479&gt; ttl tt
(integer) 24
redis 127.0.0.1:6479&gt; select 10
OK
redis 127.0.0.1:6479[10]&gt; 
</code></pre>
</div>

<h3 id="string">string</h3>
<p>string 是 redis 最基本的类型，而且 string 类型是二进制安全的，可以包含任何数据，包括图片和序列化的对象，最大可存1G字节。</p>

<p>相关命令</p>

<div class="highlighter-rouge"><pre class="highlight"><code>set key value 设置 key 对应的 string 类型的值
setnx key value 同上，如果 key 已经存在返回 0
get key 获取 key 对应的 string 值，不存在返回 nil
getset key 设置 key 的新值，并返回旧值
mget key1 key2 ... keyn 一次获取多个 key 值
mset key1 value1 key2 value2 ... keyn valuen 一次设置多个值
incr key 对 key 做 ++ 操作，如果 value 不是 int 类型会返回错误
decr kdy 对 key 做 -- 操作，可以为负 
incrby key integer 对 key 加指定值
decrby key integer 对 key 减指定值
append key value 对 key 的值追加字符串
substr key start end 截取指定 key 的字符串值，下标从0开始
</code></pre>
</div>

<p>示例</p>

<div class="highlighter-rouge"><pre class="highlight"><code>redis 127.0.0.1:6479&gt; flushdb
OK
redis 127.0.0.1:6479&gt; set k1 a k2 b k3 c
(error) ERR syntax error
redis 127.0.0.1:6479&gt; mset k1 a k2 b k3 c
OK
redis 127.0.0.1:6479&gt; mget k1 k2 k3 k4
1) "a"
2) "b"
3) "c"
4) (nil)
redis 127.0.0.1:6479&gt; incr k4
(integer) 1
redis 127.0.0.1:6479&gt; decrby k4 5
(integer) -4
redis 127.0.0.1:6479&gt; set k1 hello
OK
redis 127.0.0.1:6479&gt; append k1 ' world'
(integer) 11
redis 127.0.0.1:6479&gt; mget k1 k2 k3 k4
1) "hello world"
2) "b"
3) "c"
4) "-4"
redis 127.0.0.1:6479&gt; substr k1 2 8
"llo wor"
</code></pre>
</div>

<h3 id="list">list</h3>
<p>redis的list类型其实就是一个每个子元素都是string类型的双向链表。所以[lr]push和[lr]pop命令的算法时间复杂度都是O(1)
另外list会记录链表的长度。所以llen操作也是O(1).链表的最大长度是(2的32次方-1)。我们可以通过push,pop操作从链表的头部
或者尾部添加删除元素。这使得list既可以用作栈，也可以用作队列。有意思的是list的pop操作还有阻塞版本的。当我们[lr]pop一个
list对象是，如果list是空，或者不存在，会立即返回nil。但是阻塞版本的b[lr]pop可以则可以阻塞，当然可以加超时时间，超时后也会返回nil
。为什么要阻塞版本的pop呢，主要是为了避免轮询。举个简单的例子如果我们用list来实现一个工作队列。执行任务的thread可以调用阻塞版本的pop去
获取任务这样就可以避免轮询去检查是否有任务存在。当任务来时候工作线程可以立即返回，也可以避免轮询带来的延迟。</p>

<p>相关命令</p>

<div class="highlighter-rouge"><pre class="highlight"><code>lpush key string 在 key 对应的 list 头部添加字符串元素，如果 key 不是 list 类型返回错误
rpush key string 同上，在尾部添加
llen key 返回 key 对应的 list 的长度，key 不存在返回0，key 不是 list 类型返回错误
lrange key start end 返回指定区间内的元素，下标从0开始，负数表示从后面开始
ltrim key start end 截取 list，保留指定区间内的元素
lset key index value 设置 list 指定下标的元素值
lrem key count value 从 key 对应的 list 中删除 count 个 和 value 元素相同的元素，count 为0时删除全部
lpop key 从 list 头部删除元素，并返回删除元素
rpop key 同上，从 list 尾部删除
blpop key1 key2 ... keyn timeout 从左到右返回一个非空 list 进行 lpop 操作并返回，如果所有的 list 都为空或者不存在，则会等待 timeout 秒，等待期间有 list 的 push 操作则立即返回，超时则返回 nil
brpop key1 key2 ... keyn timeout 同上，从尾部删除
rpoplpush srckey destkey 从 srckey 对应的 list 的尾部移动元素添加到 destkey 对应的 list 头部，最后返回被移除的元素，srckey 为空或者不存在返回 nil
</code></pre>
</div>

<p>示例</p>

<div class="highlighter-rouge"><pre class="highlight"><code>redis 127.0.0.1:6479&gt; lpush list1 aaa
(integer) 1
redis 127.0.0.1:6479&gt; rpush list1 bbb
(integer) 2
redis 127.0.0.1:6479&gt; lpush list1 ccc
(integer) 3
redis 127.0.0.1:6479&gt; lpush list1 ddd
(integer) 4
redis 127.0.0.1:6479&gt; llen list1
(integer) 4
redis 127.0.0.1:6479&gt; lrange list1 0 2
1) "ddd"
2) "ccc"
3) "aaa"
redis 127.0.0.1:6479&gt; ltrim list1 0 2
OK
redis 127.0.0.1:6479&gt; lrange list1 0 3
1) "ddd"
2) "ccc"
3) "aaa"
redis 127.0.0.1:6479&gt; lset list1 1 eeee
OK
redis 127.0.0.1:6479&gt; lpop list1
"ddd"
redis 127.0.0.1:6479&gt; rpop list1
"aaa"
</code></pre>
</div>

<h3 id="set">set</h3>
<p>redis的set是string类型的无序集合。set元素最大可以包含(2的32次方-1)个元素。set的是通过hash table实现的，所以添加，删除，查找的复杂度都是O(1)。hash table会随着添加或者删除自动的调整大小。需要注意的是调整hash table大小时候需要同步（获取写锁）会阻塞其他读写操作。可能不久后就会改用跳表（skip list）来实现
跳表已经在sorted set中使用了。关于set集合类型除了基本的添加删除操作，其他有用的操作还包含集合的取并集(union)，交集(intersection)，
差集(difference)。通过这些操作可以很容易的实现sns中的好友推荐和blog的tag功能。</p>

<p>相关命令</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sadd key member 添加一个 string 元素到 key 对应的 set 集合中
srem key member 从 key 对应的 set 中移除给定元素
spop key 删除并返回 key 对应的 set 随机的一个元素
srandmember key 随机获取 set 中的一个元素，不删除
smove srckey destkey member 从 srckey 对应的 set 中移除 member 并添加到 destkey 对应的 set 中
scard key 返回 set 的元素个数
sismember key member 判断 member 是否在 set 中
sinter key1 key2 ... keyn 返回所有 set 的交集
sinterstore destkey key1 key2 ... keyn 同上，并保存交集到 destkey 对应的 set 下
sunion key1 key2 ... keyn 返回所有给定 set 的并集
sunion destkey key1 key2 ... keyn 同上，并同时保存并集到 destkey 对应的 set 下
sdiff key1 key2 ... keyn 返回所有 set 的差集
sdiffstore destkey key1 key2 ... keyn 同上，并保存差集到 destkey 对应的 set 下
smembers key 返回 key 对应的所有元素，结果是无序的
</code></pre>
</div>

<p>示例</p>

<div class="highlighter-rouge"><pre class="highlight"><code>redis 127.0.0.1:6479&gt; sadd set1 aaa
(integer) 1
redis 127.0.0.1:6479&gt; sadd set1 bbb
(integer) 1
redis 127.0.0.1:6479&gt; sadd set1 ccc
(integer) 1
redis 127.0.0.1:6479&gt; srem set1 bbb
(integer) 1
redis 127.0.0.1:6479&gt; spop set1
"aaa"
redis 127.0.0.1:6479&gt; scard set1
(integer) 1
redis 127.0.0.1:6479&gt; smembers set1
1) "ccc"
redis 127.0.0.1:6479&gt; sadd set2 aaa
(integer) 1
redis 127.0.0.1:6479&gt; sadd set2 bbb
(integer) 1
redis 127.0.0.1:6479&gt; sadd set2 ccc
(integer) 1
redis 127.0.0.1:6479&gt; sinterstore set3 set1 set2
(integer) 1
redis 127.0.0.1:6479&gt; smembers set3
1) "ccc"
</code></pre>
</div>

<h3 id="sorted-set">sorted set</h3>
<p>和set一样sorted set也是string类型元素的集合，不同的是每个元素都会关联一个double类型的score。sorted set的实现是skip list和hash table的混合体
当元素被添加到集合中时，一个元素到score的映射被添加到hash table中，所以给定一个元素获取score的开销是O(1),另一个score到元素的映射被添加到skip list
并按照score排序，所以就可以有序的获取集合中的元素。添加，删除操作开销都是O(log(N))和skip list的开销一致,redis的skip list实现用的是双向链表,这样就
可以逆序从尾部取元素。sorted set最经常的使用方式应该是作为索引来使用.我们可以把要排序的字段作为score存储，对象的id当元素存储。</p>

<p>相关命令</p>

<div class="highlighter-rouge"><pre class="highlight"><code>zadd key score member 添加元素互集合，元素存在只更新对应的 scroe
zrem key member 删除指定元素
zincrby key incr member 增加对应 member 的 scroe 值
zrank key member 返回指定元素在集合中的下标，默认按 score 从小到大排序
zrevrank key member 同上，按 scroe 从大到小排序
zrange key start end 返回指定区间的元素
zrevrange key start end 同上，返回结果按 score 逆序
zrangebystore key min max 返回集合中 score 在给定区间的元素
zcount key min max 返回集合中 score 在给定区间的数量
zcard key 返回集合中元素个数
zscore key element 返回给定元素对应的 score
zremrangebyrank key min max 删除集合中排名在给定区间的元素
zremrangebyscore key min max 删除集合中 score 在给定区间的元素
</code></pre>
</div>

<p>示例</p>

<div class="highlighter-rouge"><pre class="highlight"><code>redis 127.0.0.1:6479&gt; zadd ss1 10000 abc
(integer) 1
redis 127.0.0.1:6479&gt; zadd ss1 20000 bbb
(integer) 1
redis 127.0.0.1:6479&gt; zadd ss1 30000 ccc
(integer) 1
redis 127.0.0.1:6479&gt; zadd ss1 44000 ddd
(integer) 1
redis 127.0.0.1:6479&gt; zrank ss1 bbb
(integer) 1
redis 127.0.0.1:6479&gt; zrevrank ss1 bbb
(integer) 2
redis 127.0.0.1:6479&gt; zcard ss1
(integer) 4
redis 127.0.0.1:6479&gt; zrangebyscore ss1 20000 40000
1) "bbb"
2) "ccc"
</code></pre>
</div>

<h3 id="hash">hash</h3>
<p>redis hash是一个string类型的field和value的映射表.它的添加，删除操作都是O(1)（平均）.hash特别适合用于存储对象。相较于将对象的每个字段存成
单个string类型。将一个对象存储在hash类型中会占用更少的内存，并且可以更方便的存取整个对象。省内存的原因是新建一个hash对象时开始是用zipmap（又称为small hash）来存储的。这个zipmap其实并不是hash table，但是zipmap相比正常的hash实现可以节省不少hash本身需要的一些元数据存储开销。尽管zipmap的添加，删除，查找都是O(n)，但是由于一般对象的field数量都不太多。所以使用zipmap也是很快的,也就是说添加删除平均还是O(1)。如果field或者value的大小超出一定限制后，redis会在内部自动将zipmap替换成正常的hash实现. 这个限制可以在配置文件中指定
hash-max-zipmap-entries 64 #配置字段最多64个
hash-max-zipmap-value 512 #配置value最大为512字节</p>

<p>相关命令</p>

<div class="highlighter-rouge"><pre class="highlight"><code>hset key field value 设置 hash field 指定值
hget key field 获取指定的 hash field 值
hmget key field1 field2 ... fieldn 获取全部指定的值
hmset key field1 value1 field2 value2 ... fieldn valuen 同时设定多个 field 值
hincrby key field integer 将指定的 field 加上给定的值
hexists key field 判断指定的 field 是否存在
hdel key field 删除指定的 field
hlen key 返回指定的 field 数量
hkeys key 返回所有的 field
hvals key 返回所有的 value
hgetall 返回所有的 field 和 value
</code></pre>
</div>

<p>示例</p>

<div class="highlighter-rouge"><pre class="highlight"><code>redis 127.0.0.1:6479&gt; hmset hash1 field1 aaa field2 bbb field3 ccc
OK
redis 127.0.0.1:6479&gt; hmget hash1 field1 field2 field3
1) "aaa"
2) "bbb"
3) "ccc"
redis 127.0.0.1:6479&gt; hexists hash1 field2
(integer) 1
redis 127.0.0.1:6479&gt; hlen hash1
(integer) 3
redis 127.0.0.1:6479&gt; hkeys hash1
1) "field1"
2) "field2"
3) "field3"
redis 127.0.0.1:6479&gt; hvals hash1
1) "aaa"
2) "bbb"
3) "ccc"
redis 127.0.0.1:6479&gt; hgetall hash1
1) "field1"
2) "aaa"
3) "field2"
4) "bbb"
5) "field3"
6) "ccc"
</code></pre>
</div>


                                </div>
                            </div>
                        </div>
                        <div class='row'>
                            
                            <div class='col-lg-6 col-md-6 col-sm-12 col-xs-12'>
                                <span>上一篇:
                                    <a href='/blog/2013/05/05/redis-usage-2.html' title='Redis Linux Pipeline && 分布式'>Redis Linux Pipeline && 分布式</a>
                                </span>
                            </div>
                            
                            
                            <div class='col-lg-6 col-md-6 col-sm-12 col-xs-12'>
                                <span class='pull-right hidden-sm hiden-xs visible-lg visible-md'>下一篇:
                                    <a href='/blog/2013/05/13/maven-multi-modules-demo.html' title='在Eclipse中创建Maven多模块工程的例子[20150428更新]'>在Eclipse中创建Maven多模块工程的例子[20150428更新]</a>
                                </span>
                                <span class='hidden-lg hiden-md visible-sm visible-xs'>下一篇:
                                    <a href='/blog/2013/05/13/maven-multi-modules-demo.html' title='在Eclipse中创建Maven多模块工程的例子[20150428更新]'>在Eclipse中创建Maven多模块工程的例子[20150428更新]</a>
                                </span>
                            </div>
                            
                        </div><!--end row-->
                    </div>
                </div>
            </div>
            <div class='col-md-3 hidden-sm hidden-xs sidebar'>

                <div class='authorbar panel panel-default'>
                    <div class='panel-heading'>
                        <h4 class='panel-title'>作品信息</h4>
                    </div>
                    <div class='pt-author-info row panel-body'>
                        <a class='col-lg-3 col-md-4'>
                            <img width='58' height='58' src='/images/pix3.jpg' alt='作者头像'>
                        </a>
                        <div class='col-md-6 media-body'>
                            
                            
                            
                            
                            
                            
                            <h4 class='pt-author-name media-heading'>
                                <a id='pt-author-url' href='/authors/jacky/'>Jacky</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            </h4>
                            <span id='pt-article-num'></span>
                        </div>
                    </div>
                </div><!--end of authorbar-->
                
                <div class='newbar panel panel-default' id='newbar'>
                    <div class='panel-heading'>
                        <h4 class='panel-title'>最新博文</h4>
                    </div>
                    <div class='list-group new-list'>
                        
                        <div class='list-group-item list-group-item-default'>
                            <h5 class='new-heading'>
                                <a href='/blog/2017/01/08/scrapy.html' title='Scrapy 爬虫框架入门'>Scrapy 爬虫框架入门</a>
                            </h5>
                            <span class='desc'>介绍Scrapy快速编写网络爬虫</span>
                            <div class='new-post-info'>
                                <span class='new-date'>
                                    <span class='glyphicon glyphicon-calendar'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    2017-01-08
                                </span>&nbsp;&nbsp;
                                <span class='new-author'>
                                    <span class='glyphicon glyphicon-user'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    
                                    <a href='/authors/jyjsjd/'>景阳</a>
                                </span>
                            </div>
                        </div>
                        <div class='list-group-item list-group-item-default'>
                            <h5 class='new-heading'>
                                <a href='/blog/2016/12/22/mysql-introduce.html' title='mysql入门及在nodejs下的简单应用'>mysql入门及在nodejs下的简单应用</a>
                            </h5>
                            <span class='desc'>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目...</span>
                            <div class='new-post-info'>
                                <span class='new-date'>
                                    <span class='glyphicon glyphicon-calendar'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    2016-12-22
                                </span>&nbsp;&nbsp;
                                <span class='new-author'>
                                    <span class='glyphicon glyphicon-user'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    
                                    <a href='/authors/huqinghai/'>胡青海</a>
                                </span>
                            </div>
                        </div>
                        <div class='list-group-item list-group-item-default'>
                            <h5 class='new-heading'>
                                <a href='/blog/2016/12/19/pm2.html' title='PM2-NodeJs生产系统进程管理器'>PM2-NodeJs生产系统进程管理器</a>
                            </h5>
                            <span class='desc'>PM2是具有内置负载平衡器的Node.js应用程序的生产流程管理器。 它可...</span>
                            <div class='new-post-info'>
                                <span class='new-date'>
                                    <span class='glyphicon glyphicon-calendar'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    2016-12-19
                                </span>&nbsp;&nbsp;
                                <span class='new-author'>
                                    <span class='glyphicon glyphicon-user'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    
                                    <a href='/authors/tangshizhong/'>汤仕忠</a>
                                </span>
                            </div>
                        </div>
                        <div class='list-group-item list-group-item-default'>
                            <h5 class='new-heading'>
                                <a href='/blog/2016/12/18/mocha-introduction.html' title='测试框架 Mocha入门'>测试框架 Mocha入门</a>
                            </h5>
                            <span class='desc'>Mocha（发音"摩卡"）诞生于2011年，是现在最流行的JavaScri...</span>
                            <div class='new-post-info'>
                                <span class='new-date'>
                                    <span class='glyphicon glyphicon-calendar'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    2016-12-18
                                </span>&nbsp;&nbsp;
                                <span class='new-author'>
                                    <span class='glyphicon glyphicon-user'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    
                                    <a href='/authors/chenfan/'>陈凡</a>
                                </span>
                            </div>
                        </div>
                        <div class='list-group-item list-group-item-default'>
                            <h5 class='new-heading'>
                                <a href='/blog/2016/12/18/canvas-3.html' title='canvas学习[3]--文本和图片'>canvas学习[3]--文本和图片</a>
                            </h5>
                            <span class='desc'>本文将介绍canvas中对于文本和图片的处理。</span>
                            <div class='new-post-info'>
                                <span class='new-date'>
                                    <span class='glyphicon glyphicon-calendar'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    2016-12-18
                                </span>&nbsp;&nbsp;
                                <span class='new-author'>
                                    <span class='glyphicon glyphicon-user'></span>
                                    <span class='sr-only'>&nbsp;:&nbsp;</span>
                                    
                                    <a href='/authors/wanghui/'>汪回</a>
                                </span>
                            </div>
                        </div>
                    </div>
                </div><!--end of newestbar-->
            </div>
        </div>
    </div>

    <script src="http://s13.cnzz.com/stat.php?id=5229914&web_id=5229914" language="JavaScript"></script>
</body>
</html>	
